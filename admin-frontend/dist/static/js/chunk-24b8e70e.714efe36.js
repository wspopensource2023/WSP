(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24b8e70e"],{"1b9b":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("创建成就")]),a("el-dialog",{attrs:{visible:e.dialogVisible,title:"创建成就"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"选择活动名称"}},[a("el-select",{attrs:{placeholder:"选择活动名称","value-key":"campaign_name"},model:{value:e.form.campaign_id,callback:function(t){e.$set(e.form,"campaign_id",t)},expression:"form.campaign_id"}},e._l(e.campaignList,(function(e){return a("el-option",{key:e.campaign_id,attrs:{label:e.campaign_name,value:e.campaign_id}})})),1)],1),a("el-form-item",{attrs:{label:"徽章上传"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","http-request":e.upload_image,"show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"发行数量"}},[a("el-input",{attrs:{type:"number"},model:{value:e.form.issuance_quantity,callback:function(t){e.$set(e.form,"issuance_quantity",e._n(t))},expression:"form.issuance_quantity"}})],1),a("el-form-item",{attrs:{label:"成就名"}},[a("el-input",{model:{value:e.form.achievement_name,callback:function(t){e.$set(e.form,"achievement_name",t)},expression:"form.achievement_name"}})],1),a("el-form-item",{attrs:{label:"成就概要"}},[a("el-input",{model:{value:e.form.achievement_summary,callback:function(t){e.$set(e.form,"achievement_summary",t)},expression:"form.achievement_summary"}})],1),a("el-form-item",{attrs:{label:"活动介绍"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:8}},model:{value:e.form.achievement_introduction,callback:function(t){e.$set(e.form,"achievement_introduction",t)},expression:"form.achievement_introduction"}})],1),a("el-form-item",{attrs:{label:"活动tag"}},[e._l(e.form.achievement_tags,(function(t){return a("el-tag",{key:t,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return e.handleClose(t)}}},[e._v(" "+e._s(t)+" ")])})),e.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ New Tag")])],2),a("el-form-item",{attrs:{label:"发行人account id"}},[a("el-input",{model:{value:e.form.issuer_account_id,callback:function(t){e.$set(e.form,"issuer_account_id",t)},expression:"form.issuer_account_id"}})],1),a("el-form-item",{attrs:{label:"发行开始日期"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",clearable:!1,"picker-options":{firstDayOfWeek:1,locale:"zh-CN"}},model:{value:e.form.issuance_start_time,callback:function(t){e.$set(e.form,"issuance_start_time",t)},expression:"form.issuance_start_time"}})],1),a("el-form-item",{attrs:{label:"发行结束日期"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",clearable:!1,"picker-options":{firstDayOfWeek:1,locale:"zh-CN"}},model:{value:e.form.issuance_end_time,callback:function(t){e.$set(e.form,"issuance_end_time",t)},expression:"form.issuance_end_time"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)],1),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"成就图片","min-width":"15%"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("img",{staticStyle:{"max-width":"60px","max-height":"60px"},attrs:{src:t.achievement_image}})]}}])}),a("el-table-column",{attrs:{align:"center",label:"发行开始日期","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.issuance_start_time))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"发行结束日期","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.issuance_end_time))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"数量","min-width":"7%"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.issuance_quantity))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"成就名称","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.achievement_name))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"成就详情","min-width":"30%"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",{staticStyle:{display:"inline-block","max-width":"100px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"},attrs:{title:i.achievement_introduction}},[e._v(e._s(i.achievement_introduction))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"库存","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.stock))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"发行人account","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.issuer_account_id))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"编辑","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.edit_achievement(i)}}},[e._v("编辑成就")])]}}])})],1)],1),a("el-dialog",{attrs:{visible:e.editDialogVisible,title:"编辑成就"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"徽章上传"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","http-request":e.upload_update_achieventment_image,"show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[e.currentRow.achievement_image?a("img",{staticClass:"avatar",attrs:{src:e.currentRow.achievement_image}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"发行数量"}},[a("el-input",{attrs:{type:"number"},model:{value:e.currentRow.issuance_quantity,callback:function(t){e.$set(e.currentRow,"issuance_quantity",e._n(t))},expression:"currentRow.issuance_quantity"}})],1),a("el-form-item",{attrs:{label:"成就名"}},[a("el-input",{model:{value:e.currentRow.achievement_name,callback:function(t){e.$set(e.currentRow,"achievement_name",t)},expression:"currentRow.achievement_name"}})],1),a("el-form-item",{attrs:{label:"活动介绍"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:8}},model:{value:e.currentRow.achievement_introduction,callback:function(t){e.$set(e.currentRow,"achievement_introduction",t)},expression:"currentRow.achievement_introduction"}})],1),a("el-form-item",{attrs:{label:"发行人account id"}},[a("el-input",{model:{value:e.currentRow.issuer_account_id,callback:function(t){e.$set(e.currentRow,"issuer_account_id",t)},expression:"currentRow.issuer_account_id"}})],1),a("el-form-item",{attrs:{label:"发行开始日期"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",clearable:!1,"picker-options":{firstDayOfWeek:1,locale:"zh-CN"}},model:{value:e.currentRow.issuance_start_time,callback:function(t){e.$set(e.currentRow,"issuance_start_time",t)},expression:"currentRow.issuance_start_time"}})],1),a("el-form-item",{attrs:{label:"发行结束日期"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",clearable:!1,"picker-options":{firstDayOfWeek:1,locale:"zh-CN"}},model:{value:e.currentRow.issuance_end_time,callback:function(t){e.$set(e.currentRow,"issuance_end_time",t)},expression:"currentRow.issuance_end_time"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.updateForm}},[e._v("确 定")])],1)],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.listQuery.skip,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"skip",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}})],1)},n=[],r=(a("a434"),a("4654")),o=a("3a06"),l=a("333d"),s={name:"DragTable",components:{Pagination:l["a"]},filters:{statusFilter:function(e){var t={published:"success",draft:"info",deleted:"danger"};return t[e]}},data:function(){return{list:null,total:0,listLoading:!0,listQuery:{skip:0,limit:10},listCampaignQuery:{skip:1,limit:100,campaign_type:"campaign"},currentRow:{},param:null,dialogVisible:!1,editDialogVisible:!1,imageUrl:"",achievement_desc_image:"",form:{achievement_image:"",contract_address:"",issuer:"",issuance_start_time:null,issuance_end_time:null,issuance_quantity:"",issuance_mode:"",achievement_name:"",achievement_introduction:"",achievement_summary:"",stock:"",issuer_account_id:"",achievement_desc_image:"",achievement_tags:[]},inputVisible:!1,inputValue:"",campaignList:[]}},created:function(){this.getList(),this.listCampaign()},methods:{handleClose:function(e){var t=this;this.$confirm("是否确认删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.form.achievement_tags.splice(t.form.achievement_tags.indexOf(e),1)})).catch((function(){}))},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var e=this.inputValue;e&&this.form.achievement_tags.push(e),this.inputVisible=!1,this.inputValue=""},updateForm:function(){var e=this;Object(r["c"])(this.currentRow).then((function(t){e.editDialogVisible=!1,e.getList()}))},submitForm:function(){var e=this;Object(r["a"])(this.form).then((function(t){e.dialogVisible=!1,e.getList()}))},searchContList:function(){this.getList()},getList:function(){var e=this;Object(r["b"])(this.listQuery).then((function(t){e.list=t.data.achievement_list,e.total=t.data.total_count}))},listCampaign:function(){var e=this;Object(o["b"])(this.listCampaignQuery).then((function(t){e.campaignList=t.data.campaign_list}))},beforeAvatarUpload:function(e){return!0},upload_image:function(e){var t=this;Object(r["d"])(e.file,e.filename).then((function(e){t.form.imageUrl=e.image_uri,t.imageUrl=e.image_uri,t.form.achievement_image=e.image_uri}))},upload_update_achieventment_image:function(e){var t=this;Object(r["d"])(e.file,e.filename).then((function(e){t.currentRow.achievement_image=e.image_uri,t.form.achievement_image=e.image_uri}))},edit_achievement:function(e){this.currentRow=e,this.editDialogVisible=!0}}},u=s,c=(a("53d5"),a("3060"),a("375d"),a("2877")),m=Object(c["a"])(u,i,n,!1,null,"7ed61778",null);t["default"]=m.exports},3060:function(e,t,a){"use strict";a("f533")},"333d":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},n=[];a("a9e3");Math.easeInOutQuad=function(e,t,a,i){return e/=i/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,a){var i=l(),n=e-i,s=20,u=0;t="undefined"===typeof t?500:t;var c=function e(){u+=s;var l=Math.easeInOutQuad(u,i,n,t);o(l),u<t?r(e):a&&"function"===typeof a&&a()};c()}var u={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&s(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&s(0,800)}}},c=u,m=(a("5660"),a("2877")),d=Object(m["a"])(c,i,n,!1,null,"6af373ef",null);t["a"]=d.exports},"375d":function(e,t,a){"use strict";a("8b8a")},"3a06":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var i=a("b775");function n(e){return Object(i["a"])({url:"/CreateCampaign",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/ListCampaign",method:"post",data:e})}},"3c90":function(e,t,a){},4654:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return l}));var i=a("b775");function n(e){return Object(i["a"])({url:"/CreateAchievement",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/ListAchievement",method:"post",data:e})}function o(e,t){var a=new FormData;return a.append("form",e),a.append("filename",t),Object(i["a"])({url:"/UploadImage",method:"post",data:a})}function l(e){return Object(i["a"])({url:"/UpdateAchievement",method:"post",data:e})}},"53d5":function(e,t,a){"use strict";a("3c90")},5660:function(e,t,a){"use strict";a("7a30")},"7a30":function(e,t,a){},"8b8a":function(e,t,a){},f533:function(e,t,a){}}]);