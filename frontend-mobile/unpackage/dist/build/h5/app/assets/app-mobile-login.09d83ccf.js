import{_ as t,u as e,s,a as i,o,c as l,b as n,d as a,w as c,e as d,t as w,i as r,f as u,I as m,r as h}from"./index-737b53c3.js";import{I as p}from"./iconify.5a6252cb.js";import{I as x}from"./IconFont.01846b5a.js";const f=t({components:{IconFont:x,Icon:p},data:()=>({isWechat:!1,page:"phone",phone:"",code:"",nextSMSCodeDuration:0,ticker:null}),computed:{accountId:()=>e().$state.accountId,currentTimestamp:()=>Math.round((new Date).getTime()/1e3),codeButtonText(){return this.nextSMSCodeDuration>0?`下次获取时间 ${this.nextSMSCodeDuration} s`:"获取验证码"},codeButtonDisabled(){return 11!==this.phone.length||this.nextSMSCodeDuration>0},loginButtonDisabled(){return 6!==this.code.length}},onShow(){this.accountId&&s({url:"/app/mobile/achievement/list"})},created(){this.ticker=setInterval((()=>{this.nextSMSCodeDuration>0&&this.nextSMSCodeDuration--}),1e3)},destroyed(){clearInterval(this.ticker)},methods:{isPage(t){return this.page===t},switchPage(t){this.page=t},async getCode(){await i.SendSMSCode(this.phone),this.nextSMSCodeDuration=10,this.switchPage("code")},async login(){const t=await i.Login(this.phone,this.code);this.comsumeLoginRes(t)},async loginByWeixinPhone(t){const e=await i.LoginByWeixinPhone(t.detail.code);this.comsumeLoginRes(e)},jumpVisit(){s({url:"/app/mobile/achievement/list"})},comsumeLoginRes(t){const{commitJWT:i}=e(),{commitMe:o}=e();i(t.access_token),o(t),s({url:"/app/mobile/achievement/list"})}}},[["render",function(t,e,s,i,p,x){const f=r,v=u,b=m,g=h("IconFont");return o(),l("div",{class:"tw-text-white tw-h-full tw-w-full",style:{background:"#01000C"}},[x.isPage("phone")?(o(),l("div",{key:0},[n("div",{class:"tw-px-6 tw-pt-6 tw-overflow-hidden"},[n("div",{class:"tw-flex tw-justify-center tw-mt-3 tw-mb-6"},[n("div",{style:{height:"200px"}},[a(f,{src:"https://xxxxxxxx/blackhole.mp4",class:"-tw-rotate-[26deg]",style:{"margin-left":"0rem"},muted:"",controls:!1,"vslide-gesture-in-fullscreen":!1,"enable-progress-gesture":!1,"show-play-btn":!1,"show-center-play-btn":!1,"show-fullscreen-btn":!1,loop:!0,autoplay:!0,"object-fit":"cover"})])]),n("div",{class:"tw-relative",style:{"z-index":"2"}},[n("div",{class:"tw-text-3xl"},"欢迎来到xxxx_xxx"),n("div",{class:"tw-text-white tw-mt-2 tw-text-opacity-50"},"每个人都值得被看见"),n("div",{class:"tw-m-10"}),p.isWechat?(o(),l("div",{key:0},[a(v,{"open-type":"getPhoneNumber",onGetphonenumber:x.loginByWeixinPhone,class:"tw-rounded-full"},{default:c((()=>[n("div",{class:"tw-h-12 tw-flex tw-items-center tw-text-center tw-justify-center tw-text-md"}," 手机号一键登录 ")])),_:1},8,["onGetphonenumber"]),n("div",{class:"tw-text-center tw-text-white tw-text-opacity-50 tw-mt-3 tw-text-sm"},"提示：未注册用户将会自动注册"),n("div",{class:"tw-pt-28 tw-w-full tw-flex tw-justify-center"},[n("div",{onClick:e[0]||(e[0]=(...t)=>x.jumpVisit&&x.jumpVisit(...t)),class:"tw-cursor-pointer tw-text-center"},"继续以游客身份访问")])])):d("",!0),p.isWechat?d("",!0):(o(),l("div",{key:1},[n("div",{class:"tw-flex tw-flex-row tw-border tw-border-solid tw-rounded-lg tw-border-2 tw-h-12 tw-items-center tw-px-2"},[n("div",{class:"tw-text-lg tw-flex tw-items-center tw-mr-2"},[n("img",{class:"tw-w-6 tw-h-6 tw-mr-1",src:"https://static.xxxxxx.com/mdi/e89ad9961a254e5848d6350655c94e34a36b080b296b2d5b1911a688ac40f96e"})]),n("div",{class:"tw-w-full tw-flex tw-items-center"},[a(b,{focus:"",class:"tw-w-full",modelValue:p.phone,"onUpdate:modelValue":e[1]||(e[1]=t=>p.phone=t),type:"number",placeholder:"请输入大陆手机号"},null,8,["modelValue"])])]),n("div",{class:"tw-mt-5"}),n("div",null,[a(v,{class:"tw-rounded-full",disabled:x.codeButtonDisabled,onClick:x.getCode},{default:c((()=>[n("div",{class:"tw-h-12 tw-flex tw-items-center tw-text-center tw-justify-center tw-text-md"},w(x.codeButtonText),1)])),_:1},8,["disabled","onClick"])]),n("div",{class:"tw-text-center tw-text-white tw-text-opacity-50 tw-mt-3 tw-text-sm"},"提示：未注册用户将会自动注册"),n("div",{class:"tw-pt-28 tw-w-full tw-flex tw-justify-center"},[n("div",{onClick:e[2]||(e[2]=(...t)=>x.jumpVisit&&x.jumpVisit(...t)),class:"tw-cursor-pointer tw-text-center"},"继续以游客身份访问")])]))])])])):d("",!0),x.isPage("code")?(o(),l("div",{key:1},[n("div",{class:"tw-py-5 tw-px-3",onClick:e[3]||(e[3]=t=>x.switchPage("phone"))},[a(g,{size:"2rem",name:"jiantou-zuo"})]),n("div",{class:"tw-px-6 tw-pt-20"},[n("div",{class:"tw-text-3xl"},"输入验证码"),n("div",{class:"tw-my-3"},[n("span",{class:"tw-opacity-60 tw-mr-1"},"验证码已经发送至"),n("span",{class:"tw-text-blue-500"},w(p.phone),1)]),n("div",{class:"tw-m-10"}),n("div",{class:"tw-flex tw-flex-row tw-border tw-border-solid tw-rounded-lg tw-border-2 tw-h-12 tw-items-center tw-px-2"},[n("div",{class:"tw-text-lg tw-flex tw-items-center tw-mr-2"},[n("img",{class:"tw-w-6 tw-h-6 tw-mr-1",src:"https://static.xxxxxx.com/mdi/4dfdd1527b4b307951f261b0d196f7d9c7d8b02e3ea4089d1be768e6be778013"})]),n("div",{class:"tw-w-full"},[a(b,{maxlength:"6",focus:"",class:"tw-w-full",modelValue:p.code,"onUpdate:modelValue":e[4]||(e[4]=t=>p.code=t),type:"number",placeholder:"请输入验证码"},null,8,["modelValue"])])]),n("div",{class:"tw-m-5"}),n("div",null,[a(v,{class:"tw-rounded-full",disabled:x.loginButtonDisabled,onClick:x.login},{default:c((()=>[n("div",{class:"tw-h-12 tw-flex tw-items-center tw-text-center tw-justify-center tw-text-md"}," 登录 ")])),_:1},8,["disabled","onClick"])])])])):d("",!0)])}],["__scopeId","data-v-58e65329"]]);export{f as default};
