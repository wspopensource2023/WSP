import{_ as t,o as a,c as s,b as i,C as e,t as c,D as n,g as l,s as d,n as m,a as w,d as r,E as o,F as u,A as p,e as g,r as h,B as f}from"./index-737b53c3.js";import{I as b}from"./IconFont.01846b5a.js";import{g as v,d as x}from"./util.31f81129.js";import{B as _}from"./BannerView.e3e5622f.js";const y=t({data:()=>(v(),{tabIndex:1,accountId:"",issuer:{},issuedCampaigns:[],issuedCampaignSkip:1,issuedCampaignLimit:10,campaign_list:[],isNoMore:!0}),components:{IconFont:b,AchievementItem:t({props:{data:{}},data(){return console.log("achievement",this.data),{}}},[["render",function(t,n,l,d,m,w){return a(),s("div",{class:"tw-pb-3",style:{"border-radius":"10px",background:"rgba(255, 255, 255, 0.03)"}},[i("div",{style:{height:"0",padding:"0","padding-bottom":"100%"},class:"tw-w-full tw-flex-shrink-0 tw-mx-auto tw-rounded-t-xl tw-overflow-hidden"},[i("img",{mode:"widthFix",class:"tw-w-full",src:l.data.campaign_image,alt:l.data.campaign_image},null,8,["src","alt"])]),i("div",{class:"tw-px-3"},[i("div",{class:"tw-w-full tw-flex tw-mt-1 tw-text-lg tw-truncate"},[e(c(l.data.campaign_name)+" ",1),i("img",{class:"tw-w-4 tw-h-4 tw-self-center tw-ml-1",src:"https://static.xxxxxx.com/55d39abf637e94f70bd1ead24ee58f74139ec38980eda2e7c162ba16d2956262",alt:""})]),i("div",{class:"tw-w-full tw-text-sm tw-opacity-60 tw-truncate-two-line"},[e(c(l.data.campaign_summary)+" ",1),i("p",null," ")])])])}],["__scopeId","data-v-11b145f6"]]),CampaignItem:t({props:{data:{}},data(){return console.log("data",this.data),{}}},[["render",function(t,e,n,l,d,m){return a(),s("div",{class:"tw-py-4",style:{"border-radius":"10px",background:"rgba(255, 255, 255, 0.03)"}},[i("div",{class:"tw-w-44 tw-h-44 tw-flex-shrink-0 tw-mx-auto"},[i("img",{class:"tw-w-full h-full",src:n.data.campaign_image,alt:n.data.campaign_name},null,8,["src","alt"])]),i("div",{class:"tw-w-28 tw-mt-2 tw-text-sm tw-font-bold tw-truncate"},c(n.data.campaign_name),1),i("div",{class:"tw-w-28 tw-mt-1 tw-text-sm tw-opacity-60 tw-truncate"},c(n.data.campaign_summary),1)])}]]),BannerView:_},async onLoad(t){this.accountId=t.account_id,await this.prepareIssuer()},onReachBottom(){this.isNoMore||(1===this.tabIndex?this.ListAccountCampaign():this.ListAccountCampaignIssued())},methods:{async changeTab(t){this.campaign_list=[],this.tabIndex=t,this.issuedCampaignSkip=1,1===this.tabIndex?await this.ListAccountCampaign():await this.ListAccountCampaignIssued()},async jumpToDetailById(t){n({url:`/app/mobile/achievement/detail?achievementId=${t}`})},async jumpToDetail(t){if("achievement"===t.campaign_type){const a=t.achievement_ids[0];this.jumpToDetailById(a)}},getBannerImage(){return this.issuer.account_banner||"https://static.xxxxxx.com/images/9214b8c6b205da3c1ecbd2faf63260bdb8653ddf78373f58584f9a7f751a473c.jpg"},jumpBack(){const t=l();t&&1!=t.length||d({url:"/app/mobile/achievement/list"}),m()},async prepareIssuer(){const t=await w.GetAccountProfile(this.accountId);this.issuer=t,this.issuer.register_time=x(new Date(1e3*this.issuer.register_time),"yyyy-MM-dd"),this.issuer.issuer?(this.tabIndex=2,this.ListAccountCampaignIssued()):(this.tabIndex=1,this.ListAccountCampaign())},async ListAccountCampaignIssued(){const t=await w.ListAccountCampaignIssued(this.accountId,this.issuedCampaignLimit,this.issuedCampaignSkip);t&&(this.campaign_list.push(...t),t.length>=this.issuedCampaignLimit?(this.issuedCampaignSkip++,this.isNoMore=!1):this.isNoMore=!0)},async ListAccountCampaign(){const t=await w.ListAccountCampaign(this.accountId,this.issuedCampaignLimit,this.issuedCampaignSkip);t&&(this.campaign_list.push(...t),t.length>=this.issuedCampaignLimit?(this.issuedCampaignSkip++,this.isNoMore=!1):this.isNoMore=!0)}}},[["render",function(t,n,l,d,m,w){const b=h("BannerView"),v=h("AchievementItem"),x=h("CampaignItem");return a(),s("div",{class:"tw-text-white tw-w-full",style:{background:"#121212","min-height":"100%"}},[i("div",{onClick:n[0]||(n[0]=(...t)=>w.jumpBack&&w.jumpBack(...t)),class:"tw-fixed tw-top-3 tw-left-3",style:{"z-index":"1"}},[i("img",{class:"tw-w-8 tw-h-8 tw-mr-1",src:"https://static.xxxxxx.com/mdi/af8ebf95055ff7a71f265a8bcaad2eec569d30d0eabe56239b03602f7da20e76",alt:""})]),r(b,{value:m.issuer.account_banner},null,8,["value"]),i("div",{class:"tw-px-5 tw-relative -tw-mt-12 tw-z-[1]"},[i("div",null,[i("div",{class:"tw-w-24 tw-h-24"},[i("img",{style:{"border-radius":"50%"},class:"tw-w-full tw-h-full",src:m.issuer.account_avatar},null,8,["src"])]),i("div",{class:"tw-text-xl tw-mt-3"},c(m.issuer.account_name),1),i("div",{class:"tw-text-base title-color tw-mt-1"},"这个人很懒，什么都没有留下"),i("div",{class:"tw-flex tw-items-center title-color tw-mt-5"},[i("img",{class:"tw-w-5 tw-h-5 tw-self-center tw-mt-0.5 tw-mr-1",src:"https://static.xxxxxx.com/mdi/f6eac1523d2c234ae898ffbc953e464785e4a575b81ef2b12b7bf2a5389ec488",alt:""}),i("span",{class:"tw-self-center tw-mr-2"},"入驻时间"),i("span",{class:"tw-self-center tw-text-white"},c(m.issuer.register_time),1)]),i("div",{class:"tw-mt-6"},[i("div",{class:"tw-flex tw-text-lg"},[i("div",{onClick:n[1]||(n[1]=t=>w.changeTab(1)),class:o(["tw-mr-4 tab",{active:1===m.tabIndex}])}," 收集成就 ",2),i("div",{onClick:n[2]||(n[2]=t=>w.changeTab(2)),class:o(["tab",{active:2===m.tabIndex}])}," 发行成就 ",2)])])]),i("div",{class:"tw-pb-24"},[2===m.tabIndex?(a(),s("div",{key:0},[m.campaign_list&&m.campaign_list.length?(a(),s("div",{key:0,class:"tw-grid tw-grid-cols-2 tw-gap-3 tw-mt-5"},[(a(!0),s(u,null,p(m.campaign_list,(t=>(a(),s("div",{onClick:a=>w.jumpToDetail(t),key:t},["achievement"===t.campaign_type?(a(),f(v,{key:0,data:t},null,8,["data"])):g("",!0),"campaign"===t.campaign_type?(a(),f(x,{key:1,data:t},null,8,["data"])):g("",!0)],8,["onClick"])))),128))])):g("",!0)])):g("",!0),1===m.tabIndex?(a(),s("div",{key:1},[m.campaign_list&&m.campaign_list.length?(a(),s("div",{key:0,class:"tw-grid tw-grid-cols-2 tw-gap-3 tw-mt-5"},[(a(!0),s(u,null,p(m.campaign_list,(t=>(a(),s("div",{onClick:a=>w.jumpToDetailById(t.achievement_id),key:t,class:"tw-pb-3",style:{"border-radius":"10px",background:"rgba(255, 255, 255, 0.03)"}},[i("div",{style:{height:"0",padding:"0","padding-bottom":"100%"},class:"tw-w-full tw-flex-shrink-0 tw-mx-auto tw-rounded-t-xl tw-overflow-hidden"},[i("img",{mode:"widthFix",class:"tw-w-full",src:t.campaign_image,alt:t.campaign_image},null,8,["src","alt"])]),i("div",{class:"tw-px-3"},[i("div",{class:"tw-w-full tw-flex tw-mt-1 tw-text-lg tw-truncate"},[e(c(t.campaign_name)+" ",1),i("img",{class:"tw-w-4 tw-h-4 tw-self-center tw-ml-1",src:"https://static.xxxxxx.com/55d39abf637e94f70bd1ead24ee58f74139ec38980eda2e7c162ba16d2956262",alt:""})]),i("div",{class:"tw-flex tw-justify-end"},[i("div",{class:"tw-truncate tw-flex tw-items-center tw-text-sm tw-mt-1"},[i("img",{class:"tw-w-4 tw-h-4 tw-rounded-full",src:t.issuer_avatar,alt:""},null,8,["src"]),i("span",{class:"tw-ml-1 tw-text-white tw-text-opacity-60"},c(t.issuer_name),1)])])])],8,["onClick"])))),128))])):g("",!0)])):g("",!0),m.campaign_list&&m.campaign_list.length?g("",!0):(a(),s("div",{key:2,class:"tw-p-2 tw-mr-2"},[i("div",{class:"tw-text-center tw-text-white/30 tw-text-sm tw-py-8"},[i("img",{class:"tw-w-28 tw-h-28",src:"https://static.xxxxxx.com/e004bfac0ba7c2df24d955e01ff37beb5dcc5600b8ced38c5fe292a966f449f4",alt:""}),i("div",{class:"tw-text-base"},"空空如也")])]))])])])}],["__scopeId","data-v-17673721"]]);export{y as default};
