import{_ as t,o as e,c as l,b as i,t as o,J as s,r as c,d as n,p as a,e as r,M as w,a as d,F as u,A as f,B as p,w as m,l as v,q as h,P as g,i as b,H as x,v as y,ao as k,y as I,ap as S,f as P,aq as B}from"./index-737b53c3.js";import{S as C,r as T,_}from"./uni-popup.5b1a2d94.js";import{I as A}from"./IconFont.01846b5a.js";import{f as M,o as j,h as $}from"./util.31f81129.js";const L=t({props:{label:"",value:""}},[["render",function(t,c,n,a,r,w){return e(),l("div",{class:"tw-bg-white tw-bg-opacity-[0.02] tw-rounded-lg tw-h-12 tw-items-center tw-flex tw-justify-between tw-transition tw-duration-300 hover:tw-border-white tw-border-transparent tw-border-solid tw-border tw-pr-2.5"},[i("div",{class:"tw-ml-5 tw-text-white tw-text-opacity-50 tw-whitespace-nowrap"},o(n.label),1),s(t.$slots,"default")])}]]);const E=t({props:{profile:{},config:{}},components:{Link:t({props:{config:{},profile:{}},components:{SPIcon:C},data:()=>({}),methods:{getModuleStyle(){return this.profile.spec.style["module.css"]||{}},getIcon(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.icon},getTitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.title},getSubtitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.subtitle}}},[["render",function(t,s,r,w,d,u){const f=c("SPIcon");return e(),l("div",{class:"module tw-py-3",style:a(u.getModuleStyle())},[i("div",{class:"module-header"}),i("div",{class:"module-content tw-relative"},[i("div",{class:"module-content-left tw-absolute tw-left-0 tw-w-10 tw-flex tw-h-full tw-items-center"},[n(f,{size:"",class:"tw-w-10 tw-h-10",config:u.getIcon()},null,8,["config"])]),i("div",{class:"module-content-right tw-pl-14 tw-flex tw-justify-center tw-flex-col"},[i("div",{class:"module-title tw-text-base tw-break-all tw-mb-0.5 tw-truncate"},o(u.getTitle()||"暂无标题"),1),i("div",{class:"module-subtitle tw-break-all tw-text-sm tw-opacity-60 tw-truncate"},o(u.getSubtitle()),1)])]),i("div",{class:"module-footer"})],4)}]]),Story:t({props:{config:{},profile:{}},components:{SPIcon:C},data:()=>({}),methods:{getModuleStyle(){return this.profile.spec.style["module.css"]||{}},getIcon(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.icon},getTitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.title},getSubtitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.subtitle}}},[["render",function(t,s,r,w,d,u){const f=c("SPIcon");return e(),l("div",{class:"module tw-py-3",style:a(u.getModuleStyle())},[i("div",{class:"module-header"}),i("div",{class:"module-content tw-relative"},[i("div",{class:"module-content-left tw-absolute tw-left-0 tw-w-10 tw-flex tw-h-full tw-items-center"},[n(f,{size:"",class:"tw-w-10 tw-h-10",config:u.getIcon()},null,8,["config"])]),i("div",{class:"module-content-right tw-pl-14 tw-flex tw-justify-center tw-flex-col"},[i("div",{class:"module-title tw-text-base tw-break-all tw-mb-0.5 tw-truncate"},o(u.getTitle()||"暂无标题"),1),i("div",{class:"module-subtitle tw-break-all tw-text-sm tw-opacity-60 tw-truncate"},o(u.getSubtitle()),1)])]),i("div",{class:"module-footer"})],4)}]]),ZhiHu:t({props:{config:{},profile:{}},components:{SPIcon:C},data:()=>({}),methods:{getModuleStyle(){return this.profile.spec.style["module.css"]||{}},getIcon(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.icon},getTitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.title},getSubtitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.subtitle}}},[["render",function(t,s,r,w,d,u){const f=c("SPIcon");return e(),l("div",{class:"module tw-py-3",style:a(u.getModuleStyle())},[i("div",{class:"module-header"}),i("div",{class:"module-content tw-relative"},[i("div",{class:"module-content-left tw-absolute tw-left-0 tw-w-10 tw-flex tw-h-full tw-items-center"},[n(f,{size:"",class:"tw-w-10 tw-h-10",config:u.getIcon()},null,8,["config"])]),i("div",{class:"module-content-right tw-pl-14 tw-flex tw-justify-center tw-flex-col"},[i("div",{class:"module-title tw-text-base tw-break-all tw-mb-0.5 tw-truncate"},o(u.getTitle()),1),i("div",{class:"module-subtitle tw-break-all tw-text-sm tw-opacity-60 tw-truncate"},o(u.getSubtitle()),1)])]),i("div",{class:"module-footer"})],4)}]]),XiaoHongShu:t({props:{config:{},profile:{}},components:{SPIcon:C},data:()=>({}),methods:{getModuleStyle(){return this.profile.spec.style["module.css"]||{}},getIcon(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.icon},getTitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.title},getSubtitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.subtitle}}},[["render",function(t,s,r,w,d,u){const f=c("SPIcon");return e(),l("div",{class:"module tw-py-3",style:a(u.getModuleStyle())},[i("div",{class:"module-header"}),i("div",{class:"module-content tw-relative"},[i("div",{class:"module-content-left tw-absolute tw-left-0 tw-w-10 tw-flex tw-h-full tw-items-center"},[n(f,{size:"",class:"tw-w-10 tw-h-10",config:u.getIcon()},null,8,["config"])]),i("div",{class:"module-content-right tw-pl-14 tw-flex tw-justify-center tw-flex-col"},[i("div",{class:"module-title tw-text-base tw-break-all tw-mb-0.5 tw-truncate"},o(u.getTitle()),1),i("div",{class:"module-subtitle tw-break-all tw-text-sm tw-opacity-60 tw-truncate"},o(u.getSubtitle()),1)])]),i("div",{class:"module-footer"})],4)}]]),Bilibili:t({props:{config:{},profile:{}},components:{SPIcon:C},data:()=>({}),methods:{getModuleStyle(){return this.profile.spec.style["module.css"]||{}},getIcon(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.icon},getTitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.title},getSubtitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.subtitle}}},[["render",function(t,s,r,w,d,u){const f=c("SPIcon");return e(),l("div",{class:"module tw-py-3",style:a(u.getModuleStyle())},[i("div",{class:"module-header"}),i("div",{class:"module-content tw-relative"},[i("div",{class:"module-content-left tw-absolute tw-left-0 tw-w-10 tw-flex tw-h-full tw-items-center"},[n(f,{size:"",class:"tw-w-10 tw-h-10",config:u.getIcon()},null,8,["config"])]),i("div",{class:"module-content-right tw-pl-14 tw-flex tw-justify-center tw-flex-col"},[i("div",{class:"module-title tw-text-base tw-break-all tw-mb-0.5 tw-truncate"},o(u.getTitle()),1),i("div",{class:"module-subtitle tw-break-all tw-text-sm tw-opacity-60 tw-truncate"},o(u.getSubtitle()),1)])]),i("div",{class:"module-footer"})],4)}]]),Weibo:t({props:{config:{},profile:{}},components:{SPIcon:C},data:()=>({}),methods:{getModuleStyle(){return this.profile.spec.style["module.css"]||{}},getIcon(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.icon},getTitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.title},getSubtitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.subtitle}}},[["render",function(t,s,r,w,d,u){const f=c("SPIcon");return e(),l("div",{class:"module tw-py-3",style:a(u.getModuleStyle())},[i("div",{class:"module-header"}),i("div",{class:"module-content tw-relative"},[i("div",{class:"module-content-left tw-absolute tw-left-0 tw-w-10 tw-flex tw-h-full tw-items-center"},[n(f,{size:"",class:"tw-w-10 tw-h-10",config:u.getIcon()},null,8,["config"])]),i("div",{class:"module-content-right tw-pl-14 tw-flex tw-justify-center tw-flex-col"},[i("div",{class:"module-title tw-text-base tw-break-all tw-mb-0.5 tw-truncate"},o(u.getTitle()),1),i("div",{class:"module-subtitle tw-break-all tw-text-sm tw-opacity-60 tw-truncate"},o(u.getSubtitle()),1)])]),i("div",{class:"module-footer"})],4)}]]),Title:t({props:{config:{},profile:{}},components:{SPIcon:C},data:()=>({}),methods:{getModuleStyle(){return this.profile.spec.style["module.css"]||{}},getTitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.title},getSubTitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.subtitle}}},[["render",function(t,s,c,n,w,d){return e(),l("div",{class:"module tw-pt-5 tw-pb-1",style:a(d.getModuleStyle())},[i("div",{class:"module-header"}),i("div",{class:"module-content tw-relative"},[i("div",{class:"module-title tw-text-base"},[d.getTitle()?(e(),l("div",{key:0,class:"tw-text-lg tw-truncate"},o(d.getTitle()),1)):r("",!0),d.getSubTitle()?(e(),l("div",{key:1,class:"tw-text-xs tw-opacity-60 tw-truncate"},o(d.getSubTitle()),1)):r("",!0)])]),i("div",{class:"module-footer"})],4)}]]),AchievementCollected:t({props:{config:{},profile:{}},components:{SPIcon:C,AchievementItem:t({props:{name:"",image:"",issuer:{},verified:!1},components:{SPIcon:C},data:()=>({}),mounted(){},methods:{}},[["render",function(t,s,a,w,d,u){const f=c("SPIcon");return e(),l("div",{class:"tw-p-2 tw-rounded-lg tw-bg-white/[0.12] tw-border tw-border-solid tw-border-white/5"},[i("div",{class:"tw-w-32 tw-h-32 tw-p-0.5"},[i("img",{class:"tw-w-full tw-h-full tw-rounded-lg",src:a.image,alt:a.name},null,8,["src","alt"])]),i("div",{class:"tw-mt-1.5 tw-flex tw-flex-col tw-pl-1"},[i("div",{class:"tw-flex tw-flex-row tw-mb-1 tw-items-center"},[i("div",{style:{"max-width":"7rem"},class:"tw-truncate tw-text-base"},o(a.name||"未命名成就"),1),a.verified?(e(),l("div",{key:0,style:{"margin-top":"0.25rem","margin-left":"0.3rem"}},[n(f,{size:"1rem",config:"verified"})])):r("",!0)]),i("div",{class:"tw-flex tw-flex-row tw-items-center",style:{"margin-top":"-0.2rem"}},[i("img",{class:"tw-w-4 tw-h-4 tw-rounded-full tw-mr-1",src:a.issuer.avatar,alt:""},null,8,["src"]),i("div",{class:"tw-text-white/50 tw-text-sm"},o(a.issuer.name||"未知发行方"),1)])])])}]])},data:()=>({achievements:[]}),async mounted(){await this.loadAchievements(),console.log("achievements collected",this.achievements)},computed:{accountId(){var t,e;return null==(e=null==(t=this.profile)?void 0:t.spec)?void 0:e.accountId}},methods:{getModuleStyle(){const t=w.clone(this.profile.spec.style["module.css"]||{});return(parseInt(t["border-radius"])||0)>15&&(t["border-radius"]="15px"),t},async loadAchievements(){if(this.accountId){const t=await d.ListCollectedAchievement(this.accountId,1,10);this.achievements=t.achievement_list}}}},[["render",function(t,o,s,w,d,p){const m=c("AchievementItem");return e(),l("div",{class:"module tw-pt-5 tw-pb-1",style:a(p.getModuleStyle())},[i("div",{class:"module-content tw-relative no-scrollbar"},[i("div",{class:"tw-mb-3"},[i("div",{class:"tw-text-lg"},"收集成就"),i("div",{class:"tw-text-xs tw-opacity-60"},"ACHIEVEMENTS COLLECTED")]),d.achievements.length?r("",!0):(e(),l("div",{key:0,class:"tw-py-8 tw-border tw-rounded tw-border-solid tw-border-white/10"},[i("div",{class:"tw-opacity-60 tw-text-sm tw-text-center"}," 尚未收集到任何成就 ")])),i("div",{class:"tw-flex tw-flex-row tw-overflow-x-auto tw-overflow-y-hidden"},[(e(!0),l(u,null,f(d.achievements,(t=>(e(),l("div",{class:"tw-mr-3",key:t},[n(m,{name:t.achievement_name,image:t.achievement_image,issuer:t.issuer,verified:!0},null,8,["name","image","issuer"])])))),128))])]),i("div",{class:"module-footer"})],4)}],["__scopeId","data-v-5324aa3a"]]),AchievementIssued:t({props:{config:{},profile:{}},components:{SPIcon:C,AchievementItem:t({props:{name:"",image:"",description:"",participants:0},components:{SPIcon:C},data:()=>({}),mounted(){},methods:{getParticipants(){return this.participants||0}}},[["render",function(t,s,c,n,a,r){return e(),l("div",{class:"tw-p-2 tw-rounded-lg tw-bg-white/[0.02] tw-border tw-border-solid tw-border-white/5 tw-text-left"},[i("div",{class:"tw-w-40 tw-h-40 tw-p-0.5"},[i("img",{class:"tw-w-full tw-h-full tw-rounded-lg",src:c.image,alt:c.name},null,8,["src","alt"])]),i("div",{class:"tw-mt-1.5 tw-px-1.5",style:{width:"9.5rem"}},[i("div",{class:"tw-flex tw-flex-row tw-mb-1 tw-items-center"},[i("div",{style:{"max-width":"7rem"},class:"tw-truncate tw-text-base"},o(c.name),1)]),i("div",{style:{"margin-top":"-0.2rem"},class:"tw-text-white/50 tw-text-xs tw-truncate"},o(c.description),1),i("div",{class:"tw-flex tw-justify-end tw-mt-1"},[i("div",{class:"tw-text-white/50 tw-text-sm tw-text-right tw-text-xs"},o(r.getParticipants())+" 人已参与 ",1)])])])}]])},data:()=>({achievements:[]}),computed:{accountId(){var t,e;return null==(e=null==(t=this.profile)?void 0:t.spec)?void 0:e.accountId}},async mounted(){await this.loadAchievements(),console.log("achievements issued",this.achievements)},methods:{getParticipants(t){const e=t.issuance_quantity-t.stock;return e<0||!e?0:e},getModuleStyle(){const t=w.clone(this.profile.spec.style["module.css"]||{});return(parseInt(t["border-radius"])||0)>15&&(t["border-radius"]="15px"),t},async loadAchievements(){if(this.accountId){const t=await d.ListIssuedAchievement(this.accountId,1,10);this.achievements=t.achievement_list}}}},[["render",function(t,o,s,w,d,p){const m=c("AchievementItem");return e(),l("div",{class:"module tw-pt-5 tw-pb-1",style:a(p.getModuleStyle())},[i("div",{class:"module-content tw-relative tw-no-scrollbar"},[i("div",{class:"tw-mb-3"},[i("div",{class:"tw-text-lg"},"发行成就"),i("div",{class:"tw-text-xs tw-opacity-60"},"ACHIEVEMENTS ISSUED")]),d.achievements.length?r("",!0):(e(),l("div",{key:0,class:"tw-py-8 tw-border tw-rounded tw-border-solid tw-border-white/10"},[i("div",{class:"tw-opacity-60 tw-text-sm tw-text-center"}," 尚未发行过任何成就 ")])),i("div",{class:"tw-flex tw-flex-row tw-overflow-x-auto tw-overflow-y-hidden"},[(e(!0),l(u,null,f(d.achievements,(t=>(e(),l("div",{class:"tw-mr-3",key:t},[n(m,{name:t.achievement_name,image:t.achievement_image,description:t.achievement_summary,participants:p.getParticipants(t)},null,8,["name","image","description","participants"])])))),128))])]),i("div",{class:"module-footer"})],4)}],["__scopeId","data-v-3906d1c1"]])},data:()=>({}),methods:{match(t){var e,l;return(null==(l=null==(e=this.config)?void 0:e.kind)?void 0:l.toLowerCase())===(null==t?void 0:t.toLowerCase())}}},[["render",function(t,i,o,s,n,a){const w=c("Link"),d=c("Story"),u=c("ZhiHu"),f=c("XiaoHongShu"),m=c("Bilibili"),v=c("Weibo"),h=c("Title"),g=c("AchievementCollected"),b=c("AchievementIssued");return e(),l("div",null,[a.match("link")?(e(),p(w,{key:0,profile:o.profile,config:o.config},null,8,["profile","config"])):r("",!0),a.match("story")?(e(),p(d,{key:1,profile:o.profile,config:o.config},null,8,["profile","config"])):r("",!0),a.match("zhihu")?(e(),p(u,{key:2,profile:o.profile,config:o.config},null,8,["profile","config"])):r("",!0),a.match("xiaohongshu")?(e(),p(f,{key:3,profile:o.profile,config:o.config},null,8,["profile","config"])):r("",!0),a.match("bilibili")?(e(),p(m,{key:4,profile:o.profile,config:o.config},null,8,["profile","config"])):r("",!0),a.match("weibo")?(e(),p(v,{key:5,profile:o.profile,config:o.config},null,8,["profile","config"])):r("",!0),a.match("title")?(e(),p(h,{key:6,profile:o.profile,config:o.config},null,8,["profile","config"])):r("",!0),a.match("AchievementCollected")?(e(),p(g,{key:7,profile:o.profile,config:o.config},null,8,["profile","config"])):r("",!0),a.match("AchievementIssued")?(e(),p(b,{key:8,profile:o.profile,config:o.config},null,8,["profile","config"])):r("",!0)])}]]);const R=t({props:{config:{}},components:{SPIcon:C},data:()=>({}),methods:{create(){}}},[["render",function(t,s,c,n,a,r){return e(),l("div",{class:"tw-px-1"},[i("div",{class:"tw-text-xl tw-text-center"},o(c.config.spec.title||"暂无标题"),1),i("div",{class:"tw-mb-2 tw-text-center tw-opacity-60"},o(c.config.spec.subtitle),1),i("div",{class:"tw-mb-1 tw-whitespace-pre-line tw-text-left"},o(c.config.spec.content||"暂无内容"),1)])}]]);const D=t({props:{label:"",value:"",placeholder:""},methods:{copy(t){M(t)}}},[["render",function(t,s,c,n,a,w){return e(),l("div",{class:"tw-bg-white tw-bg-opacity-[0.02] tw-rounded-lg tw-h-12 tw-items-center tw-flex tw-justify-between tw-transition tw-duration-300 hover:tw-border-white tw-border-transparent tw-border-solid tw-border tw-pr-2.5"},[i("div",{class:"tw-ml-5 tw-text-white tw-text-opacity-50 tw-whitespace-nowrap"},o(c.label),1),i("div",{onClick:s[0]||(s[0]=t=>w.copy(c.value)),class:"tw-text-right tw-flex tw-justify-center"},[i("span",null,o(c.value||c.placeholder),1),c.value?(e(),l("span",{key:0,class:"tw-ml-2"},[i("img",{class:"tw-mt-0.5 tw-w-4 tw-h-4",src:"https://static.xxxxxx.com/6596fd440b55064e9b314a71b82d0966ad872c9354e7671477cbd691a829c47c",alt:c.value},null,8,["alt"])])):r("",!0)])])}]]);const U=t({props:{label:"",value:"",placeholder:""},methods:{copy(t){M(t)}}},[["render",function(t,s,c,n,a,w){return e(),l("div",null,[i("div",{class:"tw-bg-white tw-bg-opacity-[0.02] tw-rounded-lg tw-p-3 tw-flex tw-justify-between tw-transition tw-duration-300 hover:tw-border-white tw-border-transparent tw-border-solid tw-border"},[i("div",{class:"tw-ml-2 tw-mr-3 tw-text-white tw-text-opacity-50 tw-whitespace-nowrap"},o(c.label),1),i("div",{onClick:s[0]||(s[0]=t=>w.copy(c.value)),class:"tw-w-4/5 tw-justify-end tw-pr-2 tw-flex tw-text-justify tw-break-all"},o(c.value||c.placeholder),1),c.value?(e(),l("div",{key:0,onClick:s[1]||(s[1]=t=>w.copy(c.value))},[i("img",{class:"tw-mt-0.5 tw-w-4 tw-h-4",src:"https://static.xxxxxx.com/6596fd440b55064e9b314a71b82d0966ad872c9354e7671477cbd691a829c47c",alt:c.value},null,8,["alt"])])):r("",!0)])])}]]);const O=t({components:{GruopView:t({props:{readonly:!1,profile:{},config:{},index:-1},data:()=>({currentConfig:null}),components:{ModuleView:E,ModulePanelModal:t({components:{ModulePanel:t({props:{profile:{},config:{}},components:{Story:R,Link:t({props:{config:{},profile:{}},components:{SPIcon:C,IconFont:A,TextBox:D,ButtonBox:L,TextareaBox:U},data:()=>({}),methods:{copy(t){M(t),this.$refs.toast.show(`${t} 已经复制到剪切板`)},open(t){j(t)},getIcon(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.icon},getTitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.title},getSubtitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.subtitle}}},[["render",function(t,s,a,r,w,d){const u=c("SPIcon"),f=c("TextBox"),p=c("ButtonBox");return e(),l("div",{class:"tw-px-1"},[i("div",{class:"tw-flex tw-mt-2 tw-mb-2 tw-items-center"},[i("div",{class:"tw-w-12 tw-flex tw-items-center tw-justify-center tw-mr-3"},[n(u,{class:"tw-ml-2 tw-w-12 tw-h-12",config:d.getIcon()},null,8,["config"])]),i("div",{class:"tw-h-12 tw-flex tw-flex-col tw-text-left tw-justify-center"},[i("span",{class:"tw-text-base"},o(d.getTitle()||"暂无标题"),1),i("span",{class:"tw-text-xs tw-text-white tw-text-opacity-50"},o(d.getSubtitle()||"暂无描述"),1)])]),i("div",{style:{"border-bottom":"1px solid #ffffff07"},class:"tw-my-3"}),i("div",null,[n(f,{class:"tw-mb-3",label:"链接",placeholder:"暂未录入链接",value:a.config.spec.url},null,8,["value"]),n(p,{onClick:s[0]||(s[0]=t=>d.open(a.config.spec.url)),label:"在浏览器中访问"},{default:m((()=>[i("img",{class:"tw-w-5 tw-h-5",src:"https://static.xxxxxx.com/c490e44a1408c1baff5e49144079334c8ed75d71ff93e005d8ebf7b3136cdb6a",alt:""})])),_:1})])])}]]),Bilibili:t({props:{config:{},profile:{}},components:{SPIcon:C,IconFont:A,TextBox:D,ButtonBox:L,TextareaBox:U},data:()=>({}),methods:{copy(t){M(t),this.$refs.toast.show(`${t} 已经复制到剪切板`)},open(t){j(t)},getIcon(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.icon},getTitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.title},getSubtitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.subtitle}}},[["render",function(t,o,s,a,r,w){const d=c("SPIcon"),u=c("TextBox"),f=c("TextareaBox"),p=c("ButtonBox");return e(),l("div",{class:"tw-px-1"},[i("div",{class:"tw-flex tw-mt-2 tw-mb-2 tw-items-center"},[i("div",{class:"tw-w-12 tw-flex tw-items-center tw-justify-center tw-mr-3"},[n(d,{class:"tw-ml-2 tw-w-12 tw-h-12",config:w.getIcon()},null,8,["config"])]),i("div",{class:"tw-h-12 tw-flex tw-flex-col tw-text-left tw-justify-center"},[i("span",{class:"tw-text-base"},"哔哩哔哩"),i("span",{class:"tw-text-xs tw-text-white tw-text-opacity-50"},"弹幕动画直播高清视频 你感兴趣的视频都在B站")])]),i("div",{style:{"border-bottom":"1px solid #ffffff07"},class:"tw-my-3"}),i("div",null,[n(u,{class:"tw-mb-3",label:"标题",value:w.getTitle()},null,8,["value"]),n(f,{class:"tw-mb-3",label:"描述",value:w.getSubtitle()},null,8,["value"]),n(u,{class:"tw-mb-3",label:"账号ID",value:s.config.spec.uid},null,8,["value"]),n(p,{class:"tw-mb-3",onClick:o[0]||(o[0]=t=>w.copy(s.config.spec.url)),label:"复制可以在浏览器访问的链接"},{default:m((()=>[i("img",{class:"tw-mt-0.5 tw-w-4 tw-h-4",src:"https://static.xxxxxx.com/6596fd440b55064e9b314a71b82d0966ad872c9354e7671477cbd691a829c47c",alt:""})])),_:1}),n(p,{onClick:o[1]||(o[1]=t=>w.open(s.config.spec.url)),label:"在浏览器中访问"},{default:m((()=>[i("img",{class:"tw-mt-0.5 tw-w-4 tw-h-4",src:"https://static.xxxxxx.com/c490e44a1408c1baff5e49144079334c8ed75d71ff93e005d8ebf7b3136cdb6a",alt:""})])),_:1})])])}]]),Weibo:t({props:{config:{},profile:{}},components:{SPIcon:C,IconFont:A,TextBox:D,ButtonBox:L,TextareaBox:U},data:()=>({}),methods:{copy(t){M(t),this.$refs.toast.show(`${t} 已经复制到剪切板`)},open(t){j(t)},getIcon(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.icon},getTitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.title},getSubtitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.subtitle}}},[["render",function(t,o,s,a,r,w){const d=c("SPIcon"),u=c("TextBox"),f=c("TextareaBox"),p=c("ButtonBox");return e(),l("div",{class:"tw-px-1"},[i("div",{class:"tw-flex tw-mt-2 tw-mb-2 tw-items-center"},[i("div",{class:"tw-w-12 tw-flex tw-items-center tw-justify-center tw-mr-3"},[n(d,{class:"tw-ml-2 tw-w-12 tw-h-12",config:w.getIcon()},null,8,["config"])]),i("div",{class:"tw-h-12 tw-flex tw-flex-col tw-text-left tw-justify-center"},[i("span",{class:"tw-text-base"},"微博"),i("span",{class:"tw-text-xs tw-text-white tw-text-opacity-50"},"追踪明星热点、了解新闻资讯、观看视频直播，随时随地发现新鲜事")])]),i("div",{style:{"border-bottom":"1px solid #ffffff07"},class:"tw-my-3"}),i("div",null,[n(u,{class:"tw-mb-3",label:"标题",value:w.getTitle()},null,8,["value"]),n(f,{class:"tw-mb-3",label:"描述",value:w.getSubtitle()},null,8,["value"]),n(u,{class:"tw-mb-3",label:"账号ID",value:s.config.spec.uid},null,8,["value"]),n(p,{class:"tw-mb-3",onClick:o[0]||(o[0]=t=>w.copy(s.config.spec.url)),label:"复制可以在浏览器访问的链接"},{default:m((()=>[i("img",{class:"tw-mt-0.5 tw-w-4 tw-h-4",src:"https://static.xxxxxx.com/6596fd440b55064e9b314a71b82d0966ad872c9354e7671477cbd691a829c47c",alt:t.value},null,8,["alt"])])),_:1}),n(p,{onClick:o[1]||(o[1]=t=>w.open(s.config.spec.url)),label:"在浏览器中访问"},{default:m((()=>[i("img",{class:"tw-mt-0.5 tw-w-4 tw-h-4",src:"https://static.xxxxxx.com/c490e44a1408c1baff5e49144079334c8ed75d71ff93e005d8ebf7b3136cdb6a",alt:""})])),_:1})])])}]]),Xiaohongshu:t({props:{config:{},profile:{}},components:{SPIcon:C,IconFont:A,TextBox:D,ButtonBox:L,TextareaBox:U},data:()=>({}),methods:{copy(t){M(t),this.$refs.toast.show(`${t} 已经复制到剪切板`)},open(t){j(t)},getIcon(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.icon},getTitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.title},getSubtitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.subtitle},confirm(){this.$emit("confirm")},back(){this.$emit("back")}}},[["render",function(t,o,s,a,r,w){const d=c("SPIcon"),u=c("TextBox"),f=c("TextareaBox"),p=c("ButtonBox");return e(),l("div",{class:"tw-px-1"},[i("div",{class:"tw-flex tw-mt-2 tw-mb-2 tw-items-center"},[i("div",{class:"tw-w-12 tw-flex tw-items-center tw-justify-center tw-mr-3"},[n(d,{class:"tw-ml-2 tw-w-12 tw-h-12",config:w.getIcon()},null,8,["config"])]),i("div",{class:"tw-h-12 tw-flex tw-flex-col tw-text-left tw-justify-center"},[i("span",{class:"tw-text-base"},"小红书"),i("span",{class:"tw-text-xs tw-text-white tw-text-opacity-50"},"2亿人的生活经验，都在小红书")])]),i("div",{style:{"border-bottom":"1px solid #ffffff07"},class:"tw-my-3"}),i("div",null,[n(u,{class:"tw-mb-3",label:"标题",value:w.getTitle()},null,8,["value"]),n(f,{class:"tw-mb-3",label:"描述",value:w.getSubtitle()},null,8,["value"]),n(u,{class:"tw-mb-3",label:"账号ID",value:s.config.spec.uid},null,8,["value"]),n(p,{class:"tw-mb-3",onClick:o[0]||(o[0]=t=>w.copy(s.config.spec.url)),label:"复制可以在浏览器访问的链接"},{default:m((()=>[i("img",{class:"tw-mt-0.5 tw-w-4 tw-h-4",src:"https://static.xxxxxx.com/6596fd440b55064e9b314a71b82d0966ad872c9354e7671477cbd691a829c47c",alt:""})])),_:1}),n(p,{onClick:o[1]||(o[1]=t=>w.open(s.config.spec.url)),label:"在浏览器中访问"},{default:m((()=>[i("img",{class:"tw-mt-0.5 tw-w-4 tw-h-4",src:"https://static.xxxxxx.com/c490e44a1408c1baff5e49144079334c8ed75d71ff93e005d8ebf7b3136cdb6a",alt:""})])),_:1})])])}]]),Zhihu:t({props:{config:{},profile:{}},components:{SPIcon:C,IconFont:A,TextBox:D,ButtonBox:L,TextareaBox:U},data:()=>({}),methods:{copy(t){M(t),this.$refs.toast.show(`${t} 已经复制到剪切板`)},open(t){j(t)},getIcon(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.icon},getTitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.title},getSubtitle(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.subtitle}}},[["render",function(t,o,s,a,r,w){const d=c("SPIcon"),u=c("TextBox"),f=c("TextareaBox"),p=c("ButtonBox");return e(),l("div",{class:"tw-px-1"},[i("div",{class:"tw-flex tw-mt-2 tw-mb-2 tw-items-center"},[i("div",{class:"tw-w-12 tw-flex tw-items-center tw-justify-center tw-mr-3"},[n(d,{class:"tw-ml-2 tw-w-12 tw-h-12",config:w.getIcon()},null,8,["config"])]),i("div",{class:"tw-h-12 tw-flex tw-flex-col tw-text-left tw-justify-center"},[i("span",{class:"tw-text-base"},"知乎"),i("span",{class:"tw-text-xs tw-text-white tw-text-opacity-50"},"有问题，就会有答案")])]),i("div",{style:{"border-bottom":"1px solid #ffffff07"},class:"tw-my-3"}),i("div",null,[n(u,{class:"tw-mb-3",label:"标题",value:w.getTitle()},null,8,["value"]),n(f,{class:"tw-mb-3",label:"描述",value:w.getSubtitle()},null,8,["value"]),n(u,{class:"tw-mb-3",label:"账号ID",value:s.config.spec.uid},null,8,["value"]),n(p,{class:"tw-mb-3",onClick:o[0]||(o[0]=t=>w.copy(s.config.spec.url)),label:"复制可以在浏览器访问的链接"},{default:m((()=>[i("img",{class:"tw-mt-0.5 tw-w-4 tw-h-4",src:"https://static.xxxxxx.com/6596fd440b55064e9b314a71b82d0966ad872c9354e7671477cbd691a829c47c",alt:""})])),_:1}),n(p,{onClick:o[1]||(o[1]=t=>w.open(s.config.spec.url)),label:"在浏览器中访问"},{default:m((()=>[i("img",{class:"tw-mt-0.5 tw-w-4 tw-h-4",src:"https://static.xxxxxx.com/c490e44a1408c1baff5e49144079334c8ed75d71ff93e005d8ebf7b3136cdb6a",alt:""})])),_:1})])])}]]),AchievementCollected:t({props:{config:{},profile:{}},components:{SPIcon:C},data:()=>({achievements:[]}),async mounted(){await this.loadAchievements()},computed:{accountId(){var t,e;return null==(e=null==(t=this.profile)?void 0:t.spec)?void 0:e.accountId}},methods:{async jumpAchievementDetail(t){v({url:`/app/mobile/achievement/detail?achievementId=${t}`})},async loadAchievements(){const t=await d.ListCollectedAchievement(this.accountId,1,10);this.achievements=t.achievement_list}}},[["render",function(t,s,c,n,a,r){return e(),l("div",{class:"module tw-p-1 tw-text-left"},[i("div",{class:"tw-flex tw-flex-row tw-items-center tw-justify-center tw-text-sm"},[i("div",null,"收集的数字成就")]),i("div",{class:"module-content tw-relative tw-mt-2"},[i("div",{class:"tw-flex tw-flex-col tw-truncate"},[(e(!0),l(u,null,f(a.achievements,(t=>(e(),l("div",{onClick:e=>r.jumpAchievementDetail(t.achievement_id),class:"tw-flex tw-flex-row tw-mb-3 tw-overflow-hidden tw-px-2 tw-py-1",key:t},[i("div",{class:"tw-w-16 tw-h-16 tw-flex-shrink-0"},[i("img",{class:"tw-w-full tw-h-full tw-rounded-full",src:t.achievement_image,alt:t.achievement_name},null,8,["src","alt"])]),i("div",{class:"tw-h-16 tw-flex tw-flex-col tw-ml-2 tw-justify-center tw-overflow-hidden"},[i("div",{class:"tw-truncate tw-text-base tw-mb-1"},o(t.achievement_name),1),i("div",{class:"tw-flex tw-flex-row tw-items-center"},[i("img",{class:"tw-w-4 tw-h-4 tw-rounded-full tw-mr-1",src:t.issuer.avatar,alt:""},null,8,["src"]),i("span",{class:"tw-truncate tw-text-sm tw-opacity-60"},o(t.issuer.name),1)])])],8,["onClick"])))),128))])]),i("div",{class:"module-footer"},[i("div",{class:"tw-text-sm tw-text-center tw-mt-3 tw-opacity-30"}," 只展示最多10条记录 ")])])}]]),AchievementIssued:t({props:{config:{},profile:{}},components:{SPIcon:C},data:()=>({achievements:[]}),async mounted(){await this.loadAchievements(),console.log("$$$",this.achievements)},computed:{accountId(){var t,e;return null==(e=null==(t=this.profile)?void 0:t.spec)?void 0:e.accountId}},methods:{async jumpAchievementDetail(t){v({url:`/app/mobile/achievement/detail?achievementId=${t}`})},async loadAchievements(){const t=await d.ListIssuedAchievement(this.accountId,1,10);this.achievements=t.achievement_list}}},[["render",function(t,s,c,n,a,r){return e(),l("div",{class:"module tw-p-1 tw-text-left"},[i("div",{class:"tw-flex tw-flex-row tw-items-center tw-justify-center tw-text-sm"},[i("div",null,"发行的数字成就")]),i("div",{class:"module-content tw-relative tw-mt-2"},[i("div",{class:"tw-flex tw-flex-col tw-truncate"},[(e(!0),l(u,null,f(a.achievements,(t=>(e(),l("div",{onClick:e=>r.jumpAchievementDetail(t.achievement_id),class:"tw-flex tw-flex-row tw-mb-3 tw-overflow-hidden tw-px-2 tw-py-1",key:t},[i("div",{class:"tw-w-16 tw-h-16 tw-flex-shrink-0"},[i("img",{class:"tw-w-full tw-h-full tw-rounded-full",src:t.achievement_image,alt:t.achievement_name},null,8,["src","alt"])]),i("div",{class:"tw-flex tw-flex-col tw-ml-2 tw-justify-center tw-overflow-hidden"},[i("div",{class:"tw-truncate tw-text-base tw-mb-1"},o(t.achievement_name),1),i("div",{class:"tw-truncate tw-text-sm tw-opacity-60"},[i("span",null,o(t.achievement_summary),1)])])],8,["onClick"])))),128))])]),i("div",{class:"module-footer"},[i("div",{class:"tw-text-sm tw-text-center tw-mt-3 tw-opacity-30"}," 只展示最多10条记录 ")])])}]])},data:()=>({}),methods:{match(t){var e,l;return(null==(l=null==(e=this.config)?void 0:e.kind)?void 0:l.toLowerCase())===t.toLowerCase()}}},[["render",function(t,i,o,s,n,a){const w=c("Story"),d=c("Link"),u=c("Bilibili"),f=c("Weibo"),m=c("Xiaohongshu"),v=c("Zhihu"),h=c("AchievementCollected"),g=c("AchievementIssued");return e(),l("div",{class:"tw-mb-2"},[a.match("story")?(e(),p(w,{key:0,profile:o.profile,config:o.config},null,8,["profile","config"])):r("",!0),a.match("link")?(e(),p(d,{key:1,profile:o.profile,config:o.config},null,8,["profile","config"])):r("",!0),a.match("bilibili")?(e(),p(u,{key:2,profile:o.profile,config:o.config},null,8,["profile","config"])):r("",!0),a.match("weibo")?(e(),p(f,{key:3,profile:o.profile,config:o.config},null,8,["profile","config"])):r("",!0),a.match("xiaohongshu")?(e(),p(m,{key:4,profile:o.profile,config:o.config},null,8,["profile","config"])):r("",!0),a.match("zhihu")?(e(),p(v,{key:5,profile:o.profile,config:o.config},null,8,["profile","config"])):r("",!0),a.match("AchievementCollected")?(e(),p(h,{key:6,profile:o.profile,config:o.config},null,8,["profile","config"])):r("",!0),a.match("AchievementIssued")?(e(),p(g,{key:7,profile:o.profile,config:o.config},null,8,["profile","config"])):r("",!0)])}]])},props:{profile:{}},data:()=>({config:{}}),methods:{show(t){console.log("show",t),this.config=t,this.$refs.modal.open("bottom")},hide(){this.$refs.modal.close()}}},[["render",function(t,l,o,s,a,r){const w=c("ModulePanel"),d=T(h("uni-popup"),_);return e(),p(d,{ref:"modal"},{default:m((()=>[i("div",{class:"tw-relative tw-rounded-t-xl tw-pt-3 tw-px-3 tw-pb-6",style:{background:"linear-gradient(180deg, #252525 0%, #181818 100%)"}},[i("div",{class:"tw-absolute tw-top-0 tw-right-3"},[i("div",{class:"tw-relative tw-flex tw-flex-row tw-items-center tw-py-3 tw-opacity-60"},[i("div",{onClick:l[0]||(l[0]=(...t)=>r.hide&&r.hide(...t)),class:"tw-flex tw-items-center tw-justify-center tw-w-4 tw-h-4 tw-bg-white tw-bg-opacity-10 tw-rounded-full tw-p-0.5"},[i("img",{class:"tw-w-3 tw-h-3",src:"https://static.xxxxxx.com/63d2ad6ca4076d87299a85e2373bb5ad53a73ab1857c51c33930790f5cb3090e"})])])]),n(w,{profile:o.profile,config:a.config},null,8,["profile","config"])])])),_:1},512)}]])},mounted(){},computed:{},methods:{showModulePanel(t){"Title"!==t.kind&&(this.currentConfig=t,this.$refs.ModulePanelModal.show(this.currentConfig))},match(t,e){var l;return(null==(l=t.kind)?void 0:l.toLowerCase())===(null==e?void 0:e.toLowerCase())},getChildren(){var t,e;return null==(e=null==(t=this.config)?void 0:t.spec)?void 0:e.children}}},[["render",function(t,i,o,s,a,r){const w=c("ModuleView"),d=c("ModulePanelModal");return e(),l("div",null,[(e(!0),l(u,null,f(r.getChildren(),((t,i)=>(e(),l("div",{class:"tw-cursor-default",key:t,onClick:e=>r.showModulePanel(t)},[n(w,{profile:o.profile,config:t},null,8,["profile","config"])],8,["onClick"])))),128)),n(d,{ref:"ModulePanelModal",profile:o.profile},null,8,["profile"])])}],["__scopeId","data-v-f370a33f"]]),ModuleView:E},props:{width:String,height:String,profile:{}},methods:{clickAvatar(){this.$emit("clickAvatar")},getGroups(){var t,e;return null==(e=null==(t=this.profile)?void 0:t.spec)?void 0:e.children},getDocumentStyle(){return{width:this.width||"100%",height:this.height||"100%"}},getBackgroundMode(){var t,e;try{return null==(e=null==(t=this.profile)?void 0:t.spec)?void 0:e.style[g.KEY_PROFILE_BACKGROUND_MODE]}catch{return""}},isBackgroundMode(t){return this.getBackgroundMode()===t&&this.getBackgroundVideo()},getModulesStyle(){var t,e;return{"text-align":(null==(e=null==(t=this.profile)?void 0:t.spec)?void 0:e.style[g.KEY_PROFILE_TEXT_ALIGN])||g.DEFAULT_PROFILE_TEXT_ALIGN}},getBackgroundImage(){var t,e;return this.getSafeNetworkResource(null==(e=null==(t=this.profile)?void 0:t.spec)?void 0:e.style[g.KEY_PROFILE_BACKGROUND_IMAGE])},getBackgroundColor(){var t,e;return null==(e=null==(t=this.profile)?void 0:t.spec)?void 0:e.style[g.KEY_PROFILE_BACKGROUND_COLOR]},getBackgroundVideo(){var t,e;return this.getSafeNetworkResource(null==(e=null==(t=this.profile)?void 0:t.spec)?void 0:e.style[g.KEY_PROFILE_BACKGROUND_VIDEO])},getSafeNetworkResource:t=>"string"==typeof t&&0===t.indexOf("http")?t:"",getBackgroundStyle(){const t={};return"color"===this.getBackgroundMode()&&(t["background-color"]=this.getBackgroundColor()),t}}},[["render",function(t,s,n,w,d,m){var v,h,g,x,y,k;const I=b,S=c("GruopView");return e(),l("div",{ref:"document",class:"tw-relative tw-text-white",style:a(m.getDocumentStyle())},[i("div",{class:"tw-absolute tw-t-0 tw-l-0 tw-w-full tw-h-full"},[i("div",{class:"tw-absolute tw-t-0 tw-l-0 tw-w-full tw-h-full",style:a(m.getBackgroundStyle())},["image"===m.getBackgroundMode()?(e(),l("img",{key:0,class:"tw-w-full",src:m.getBackgroundImage(),alt:""},null,8,["src"])):r("",!0)],4),m.isBackgroundMode("video")?(e(),l("div",{key:0,class:"tw-absolute tw-t-0 tw-l-0 tw-w-full tw-h-full"},[m.getBackgroundVideo()?(e(),p(I,{key:0,"object-fit":"contain",class:"tw-w-full tw-h-full tw-object-top",muted:"",controls:!1,"vslide-gesture-in-fullscreen":!1,"enable-progress-gesture":!1,"show-play-btn":!1,"show-center-play-btn":!1,"show-fullscreen-btn":!1,loop:!0,autoplay:!0,src:m.getBackgroundVideo()},null,8,["src"])):r("",!0)])):r("",!0)]),i("div",{class:"tw-absolute tw-t-0 tw-l-0 tw-w-full tw-flex tw-flex-col tw-overflow-y-auto tw-h-full"},[i("div",{style:{width:"100%",height:"0",padding:"0","padding-bottom":"75%"}}),i("div",{style:{background:"linear-gradient(\n                        180deg,\n                        rgba(0, 0, 0, 0) 0%,\n                        rgba(0, 0, 0, 0.45) 35%,\n                        rgba(0, 0, 0, 0.80) 60%,\n                        rgba(0, 0, 0, 1) 100%\n                    )"}},[i("div",{onClick:s[0]||(s[0]=(...t)=>m.clickAvatar&&m.clickAvatar(...t)),class:"tw-block tw-w-28 tw-h-28 tw-rounded-full tw-mx-auto tw-overflow-hidden"},[i("img",{class:"tw-w-full tw-h-full",src:null==(h=null==(v=n.profile)?void 0:v.spec)?void 0:h.avatar,alt:""},null,8,["src"])]),i("div",{class:"tw-mt-3 tw-text-center tw-text-2xl"},o(null==(x=null==(g=n.profile)?void 0:g.spec)?void 0:x.title),1),i("div",{class:"tw-flex tw-flex-row tw-items-center tw-justify-center"},[i("div",{id:"description",class:"tw-mt-3 tw-text-center tw-opacity-80 tw-text-sm tw-px-6 tw-text-justify"},o(null==(k=null==(y=n.profile)?void 0:y.spec)?void 0:k.description),1)])]),i("div",{class:"tw-pt-3 tw-pb-6 tw-px-4",style:{"background-color":"#000",flex:"1"}},[i("div",{style:a(m.getModulesStyle())},[(e(!0),l(u,null,f(m.getGroups(),((t,l)=>(e(),p(S,{readonly:!0,profile:n.profile,index:l,config:t,key:t},null,8,["profile","index","config"])))),128))],4),i("div",{class:"tw-flex tw-flex-col tw-text-center tw-text-opacity-30 tw-text-white tw-pt-10"},[i("div",{class:"tw-font-bold"},"POWERED BY"),i("div",{class:"tw-text-sm"},"xxxxxx.com")])])])],4)}]]);const q=t({components:{SPIcon:C,QRCodeModal:t({components:{SPIcon:C},props:{profile:{}},data:()=>({qrcodeImageUri:""}),computed:{filename(){return`${this.profile.spec.slug} - xxxxxx.com.png`}},methods:{hide(){this.$refs.modal.close()},download(){const t=this;var e=new XMLHttpRequest;e.open("GET",this.qrcodeImageUri,!0),e.responseType="blob",e.onload=function(e){if(200==this.status){var l=new Blob([this.response],{type:"image/png"}),i=document.createElement("a");i.href=URL.createObjectURL(l),i.download=t.filename,i.click()}},e.send()},saveImage(){uni.getSetting({success:t=>{t.authSetting["scope.writePhotosAlbum"]?this.downloadImage():uni.authorize({scope:"scope.writePhotosAlbum",success:()=>{this.downloadImage()},fail:()=>{x({title:"请打开保存相册权限，再点击保存小程序码",icon:"none",duration:3e3}),setTimeout((()=>{uni.openSetting({success:t=>{console.log("res",t)}})}),3e3)}})}})},downloadImage(){y({title:"加载中"}),k({url:this.qrcodeImageUri,success:t=>{I(),200===t.statusCode&&S({filePath:t.tempFilePath,success:function(){x({title:"保存成功",icon:"success"})},fail:function(){console.log("aaaa"),x({title:"保存失败",icon:"error"})}})},fail:t=>{console.log("err:",t),x({title:"保存失败",icon:"error"})}})},async show(){y({title:"获取二维码中"});try{const t=await d.GetProfileShareQRImage(this.profile.spec.profileId);this.qrcodeImageUri=t.image_uri,this.$refs.modal.open("bottom")}finally{I()}}}},[["render",function(t,o,c,a,r,w){const d=P,u=T(h("uni-popup"),_);return e(),l("div",null,[i("div",{onClick:o[0]||(o[0]=(...t)=>w.show&&w.show(...t))},[s(t.$slots,"default")]),n(u,{ref:"modal"},{default:m((()=>[i("div",{style:{background:"linear-gradient(180deg, #252525 0%, #181818 100%)"},class:"tw-rounded-t-xl tw-text-white tw-px-3 tw-overflow-hidden"},[i("div",{class:"tw-relative tw-flex tw-flex-row tw-items-center tw-justify-center tw-py-3 tw-text-sm"},[i("div",null,"立即分享给好友"),i("div",{class:"tw-absolute tw-top-0 tw-right-0"},[i("div",{class:"tw-relative tw-flex tw-flex-row tw-items-center tw-py-3 tw-opacity-60"},[i("div",{onClick:o[1]||(o[1]=(...t)=>w.hide&&w.hide(...t)),class:"tw-flex tw-items-center tw-justify-center tw-w-4 tw-h-4 tw-bg-white tw-bg-opacity-10 tw-rounded-full tw-p-0.5"},[i("img",{class:"tw-w-3 tw-h-3",src:"https://static.xxxxxx.com/63d2ad6ca4076d87299a85e2373bb5ad53a73ab1857c51c33930790f5cb3090e"})])])])]),i("div",{class:"tw-pt-3"},[i("div",{class:"tw-flex tw-justify-center"},[i("img",{class:"tw-w-52 tw-h-52",src:r.qrcodeImageUri,alt:""},null,8,["src"])]),i("div",{class:"tw-grid tw-grid-cols-2 tw-gap-3 tw-mt-3 tw-py-3"},[n(d,{onClick:w.hide,class:"tw-w-full tw-rounded-xl tw-bg-white tw-bg-opacity-5 hover:tw-bg-opacity-10 tw-transition"},{default:m((()=>[i("div",{class:"tw-text-white tw-text-base tw-flex tw-items-center tw-justify-center tw-py-3.5"},[i("img",{class:"tw-w-5 tw-h-5 tw-mr-2",src:"https://static.xxxxxx.com/mdi/af8ebf95055ff7a71f265a8bcaad2eec569d30d0eabe56239b03602f7da20e76"}),i("span",null,"返回")])])),_:1},8,["onClick"]),n(d,{onClick:w.download,class:"tw-w-full tw-rounded-xl tw-bg-white tw-bg-opacity-5 hover:tw-bg-opacity-10 tw-transition"},{default:m((()=>[i("div",{class:"tw-text-white tw-text-base tw-flex tw-items-center tw-justify-center tw-py-3.5"},[i("img",{class:"tw-w-5 tw-h-5 tw-mr-2",src:"https://static.xxxxxx.com/ca0f0aae05c7c98b63e2bb55dbe42f845d46623f40ba2ba48143737cb286c0f5"}),i("span",null,"下载二维码")])])),_:1},8,["onClick"])])])])])),_:1},512)])}]])},props:{profile:{}},data(){return{qrcodeImageUri:"",options:[{name:"微博",icon:"weibo",click:()=>{const t=this.getProfileShareURL(),e=`https://service.weibo.com/share/share.php?title=欢迎收藏我的数字身份&pic=${this.getProfileAvatar()}&url=${t}`;window.open(e)}},{name:"QQ空间",icon:"qzone",click:()=>{const t=`${this.getProfileName()}的数字身份`,e=this.getProfileDescription(),l=this.getProfileShareURL(),i=`http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?title=${t}&desc=欢迎收藏我的数字身份&summary=${e}&pics=${this.getProfileAvatar()}&url=${l}`;window.open(i)}},{name:"复制链接",icon:"link",click:async()=>{const t=this.getProfileShareURL();B({data:t,success:function(){x({title:"复制成功",icon:"success"})}})}},{name:"复制文本",icon:"clipboard",click:async()=>{const t=this.getProfileShareURL();B({data:`欢迎收藏我的数字身份 ${t}`,success:function(){x({title:"复制成功",icon:"success",duration:3e4})}})}},{name:"二维码",icon:"qrcode",click:async()=>{await this.$refs.QRCodeModal.show()}}]}},methods:{show(){this.$refs.share.open("bottom")},hide(){this.$refs.share.close()},getProfileName(){var t,e;return null==(e=null==(t=this.profile)?void 0:t.spec)?void 0:e.name},getProfileDescription(){var t,e;return null==(e=null==(t=this.profile)?void 0:t.spec)?void 0:e.description},getProfileShareURL(){var t,e,l,i;return console.log("getProfileShareURL",$(null==(e=null==(t=this.profile)?void 0:t.spec)?void 0:e.slug)),$(null==(i=null==(l=this.profile)?void 0:l.spec)?void 0:i.slug)},getProfileAvatar(){var t,e;return null==(e=null==(t=this.profile)?void 0:t.spec)?void 0:e.avatar}}},[["render",function(t,a,r,w,d,p){const v=c("SPIcon"),g=T(h("uni-popup"),_),b=c("QRCodeModal");return e(),l("div",null,[i("div",{onClick:a[0]||(a[0]=(...t)=>p.show&&p.show(...t))},[s(t.$slots,"default")]),n(g,{ref:"share"},{default:m((()=>[i("div",{style:{background:"linear-gradient(180deg, #252525 0%, #181818 100%)"},class:"tw-rounded-t-xl tw-text-white tw-px-3 tw-overflow-hidden"},[i("div",{class:"tw-relative tw-flex tw-flex-row tw-items-center tw-justify-center tw-py-3 tw-text-sm"},[i("div",null,"立即分享给好友"),i("div",{class:"tw-absolute tw-top-0 tw-right-0"},[i("div",{class:"tw-relative tw-flex tw-flex-row tw-items-center tw-py-3 tw-opacity-60"},[i("div",{onClick:a[1]||(a[1]=(...t)=>p.hide&&p.hide(...t)),class:"tw-flex tw-items-center tw-justify-center tw-w-4 tw-h-4 tw-bg-white tw-bg-opacity-10 tw-rounded-full tw-p-0.5"},[i("img",{class:"tw-w-3 tw-h-3",src:"https://static.xxxxxx.com/63d2ad6ca4076d87299a85e2373bb5ad53a73ab1857c51c33930790f5cb3090e"})])])])]),i("div",{class:"tw-overflow-x-auto tw-overflow-y-hidden tw-grid tw-grid-cols-4 tw-pt-3 tw-pb-5 tw-px-3"},[(e(!0),l(u,null,f(d.options,(t=>(e(),l("div",{class:"tw-flex tw-justify-center tw-flex-shrink-0 tw-flex-col tw-mr-5 tw-mb-3",onClick:t.click,key:t},[i("div",{class:"tw-w-10 tw-h-10 tw-table tw-mx-auto tw-mb-2"},[n(v,{class:"tw-w-full tw-h-full",config:t.icon},null,8,["config"])]),i("div",{class:"tw-whitespace-nowrap tw-text-center"},o(t.name),1)],8,["onClick"])))),128))])])])),_:1},512),n(b,{ref:"QRCodeModal",profile:r.profile},null,8,["profile"])])}]]);export{E as M,O as P,q as S,D as T};
