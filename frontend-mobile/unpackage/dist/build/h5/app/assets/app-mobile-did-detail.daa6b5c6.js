import{_ as t,a as e,g as s,s as a,n as o,o as l,c as i,b as c,B as d,e as r,d as n,t as w,w as f,r as h,f as u}from"./index-737b53c3.js";import{P as p,S as m}from"./ShareModal.77e2e880.js";import{I as g}from"./IconFont.01846b5a.js";import"./uni-popup.5b1a2d94.js";import"./util.31f81129.js";const b=t({data:()=>({loading:!0,success:!1,did:"",profile:{}}),async created(){},async onLoad(t){console.log("options:",t);let s=t.did;const a=this.getScene(t);if(a)try{s=(await e.GetRealParams(a)).did}catch(o){console.log("failed to GetRealParams",o)}this.did=s,console.log("did",this.did),this.did?await this.loadProfile():this.jumpBack()},computed:{accountId:()=>useStorage().$state.accountId},methods:{showShare(){this.$refs.ShareModal.show()},getScene(t){var e,s;if(t.q)try{const a=decodeURIComponent(t.q),o=null==(s=null==(e=urlparse(a,!0))?void 0:e.query)?void 0:s.scene;if(o)return o}catch(a){console.log("failed to GetRealParams",a)}if(t.scene)try{return decodeURIComponent(t.scene)}catch(a){console.log("failed to GetRealParams",a)}return null},jumpBack(){const t=s();t&&1!=t.length||a({url:"/app/mobile/did/list"}),o()},async loadProfile(){try{if(this.did){let t=await e.GetProfile(this.did);return this.profile=t.profile,this.loading=!1,this.success=!0,void console.log("!!!",this.profile)}}catch(t){this.loading=!1}}},components:{Profile:p,IconFont:g,ShareModal:m}},[["render",function(t,e,s,a,o,p){const m=h("Profile"),g=h("ShareModal"),b=u;return l(),i("div",{class:"tw-text-sm tw-h-full"},[c("div",{class:"tw-fixed tw-z-[1] tw-w-11/12 tw-top-3 tw-rounded-full tw-left-0 tw-right-0 tw-mx-auto tw-backdrop-filter tw-backdrop-blur-lg tw-shadow-sm"},[c("div",{class:"tw-flex tw-flex-row tw-justify-between tw-items-center tw-py-3 tw-px-3"},[c("div",{class:"tw-w-8 tw-justify-center tw-flex tw-items-center",onClick:e[0]||(e[0]=(...t)=>p.jumpBack&&p.jumpBack(...t))},[c("img",{class:"tw-w-6 tw-h-6",src:"https://static.xxxxxx.com/mdi/af8ebf95055ff7a71f265a8bcaad2eec569d30d0eabe56239b03602f7da20e76"})]),c("div",{class:"tw-w-8 tw-justify-center tw-flex tw-items-center",onClick:e[1]||(e[1]=(...t)=>p.showShare&&p.showShare(...t))},[c("img",{class:"tw-w-4 tw-h-4",src:"https://static.xxxxxx.com/4da81a0e81ca603cdb8237f57c747d083ac35ba44bd18e89472d4b551d4afe6d"})])])]),o.success?(l(),d(m,{key:0,profile:o.profile},null,8,["profile"])):r("",!0),n(g,{ref:"ShareModal",profile:o.profile},null,8,["profile"]),o.loading||o.success?r("",!0):(l(),i("div",{key:1,style:{background:"#121212"},class:"tw-h-full tw-text-white tw-text-opacity-80 tw-overflow-hidden tw-text-left"},[c("div",{class:"tw-px-5"},[c("div",{class:"tw-text-center tw-pt-60 tw-text-lg tw-text-white"}," 未知的数字身份: "+w(o.did),1),c("div",{class:"tw-mt-5"},[n(b,{class:"tw-bg-white tw-text-black",onClick:t.back},{default:f((()=>[c("span",null,"返回我的数字身份")])),_:1},8,["onClick"])])])]))])}]]);export{b as default};
