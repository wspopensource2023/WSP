import{_ as t,l as e,H as s,a as l,o as i,c as o,b as a,J as r,d as w,w as n,e as d,F as c,A as u,t as p,r as f,q as h,u as m,p as v,K as b,L as x,f as g}from"./index-737b53c3.js";import{S as y,r as k,_ as j}from"./uni-popup.5b1a2d94.js";import{S as I}from"./SearchInput.e6e57676.js";import"./uni-easyinput.5ef0cfe0.js";const P=t({data:()=>({loading:!0,bannerInfo:{}}),computed:{profiles(){var t,e;return null==(e=null==(t=m().$state)?void 0:t.account)?void 0:e.profiles},hasProfiles(){return this.profiles&&this.profiles.length}},created(){setTimeout((()=>{this.loading=!1}),500)},onShow(){this.loadBannerInfo(),this.load()},methods:{getBannerStyle(){var t;return`background: url(${null==(t=this.bannerInfo)?void 0:t.image}) center center no-repeat; background-size: cover;`},search(){this.$refs.SearchModal.show()},createProfile(){e({url:"/app/mobile/did/edit"})},jumpProfileEditPage(t){const s=t.spec.profileId;e({url:`/app/mobile/did/edit?profileId=${s}`})},jumpBannerPage(){e({url:"/app/mobile/did/banner"})},async load(){const{commitMe:t}=m();t(await l.Me())},async loadBannerInfo(){const t=await l.GetDIDMobileBannerInfo();this.bannerInfo=t}},components:{SearchModal:t({components:{SPIcon:y,SearchInput:I},props:{profile:{}},data:()=>({keywords:"",profiles:[]}),computed:{hasResult(){return this.profiles&&this.profiles.length}},watch:{keywords(){this.profiles=[]}},methods:{jumpProfile(t){e({url:`/app/mobile/did/detail?did=${t}`})},async search(){if(console.log("!!!!!",this.keywords),!this.keywords)return void s({title:"请输入搜索关键词",icon:"none",duration:3e3});const t=await l.SearchProfile(this.keywords);t&&t.count&&t.items?(this.profiles=t.items||[],console.log("res",t)):s({title:"没有搜索到相关数字身份",icon:"none",duration:3e3})},show(){this.$refs.modal.open("bottom")},hide(){this.$refs.modal.close()}}},[["render",function(t,e,s,l,m,v){const b=f("SearchInput"),x=k(h("uni-popup"),j);return i(),o("div",null,[a("div",{onClick:e[0]||(e[0]=(...t)=>v.show&&v.show(...t))},[r(t.$slots,"default")]),w(x,{ref:"modal"},{default:n((()=>[a("div",{style:{background:"linear-gradient(180deg, #252525 0%, #181818 100%)"},class:"tw-rounded-t-xl tw-text-white tw-px-3 tw-overflow-hidden"},[a("div",{class:"tw-relative tw-flex tw-flex-row tw-items-center tw-justify-center tw-py-3 tw-text-sm"},[a("div",null,"搜索数字身份"),a("div",{class:"tw-absolute tw-top-0 tw-right-0"},[a("div",{class:"tw-relative tw-flex tw-flex-row tw-items-center tw-py-3 tw-opacity-60"},[a("div",{onClick:e[1]||(e[1]=(...t)=>v.hide&&v.hide(...t)),class:"tw-flex tw-items-center tw-justify-center tw-w-4 tw-h-4 tw-bg-white tw-bg-opacity-10 tw-rounded-full tw-p-0.5"},[a("img",{class:"tw-w-3 tw-h-3",src:"https://static.xxxxxx.com/63d2ad6ca4076d87299a85e2373bb5ad53a73ab1857c51c33930790f5cb3090e"})])])])]),a("div",{class:"tw-pt-3 tw-pb-24"},[a("div",null,[w(b,{modelValue:m.keywords,"onUpdate:modelValue":e[2]||(e[2]=t=>m.keywords=t),onSearch:v.search,placeholder:"请输入数字身份ID"},null,8,["modelValue","onSearch"])]),v.hasResult?d("",!0):(i(),o("div",{key:0},[a("div",{class:"tw-text-center tw-text-white/60 tw-text-sm tw-py-8"},[a("img",{class:"tw-w-28 tw-h-28",src:"https://static.xxxxxx.com/e004bfac0ba7c2df24d955e01ff37beb5dcc5600b8ced38c5fe292a966f449f4",alt:""}),a("div",{class:"tw-text-sm tw-opacity-30"},"请输入搜索关键词进行搜索")])])),v.hasResult?(i(),o("div",{key:1,class:"tw-mt-2 tw-pb-5"},[(i(!0),o(c,null,u(m.profiles,(t=>{var e,s,l,r;return i(),o("div",{class:"tw-transition tw-duration-300 tw-mt-3 hover:tw-border-white tw-border-solid tw-border-2 tw-border-transparent tw-bg-white tw-rounded-2xl tw-bg-opacity-5 tw-py-4 tw-px-3 tw-rounded-lg",onClick:e=>v.jumpProfile(t.spec.slug),key:t},[a("div",{class:"tw-flex tw-items-center tw-flex-row tw-flex-shrink-0"},[a("div",{class:"tw-mr-2 tw-cursor-pointer tw-mr-2 tw-flex tw-justify-center tw-items-center tw-flex-shrink-0"},[a("img",{src:null==(e=null==t?void 0:t.spec)?void 0:e.avatar,class:"tw-w-14 tw-h-14 tw-rounded-full"},null,8,["src"])]),a("div",{style:{width:"calc(100% - 4rem)"}},[a("div",{class:"tw-text-lg tw-cursor-pointer tw-flex tw-flex-row"},[a("div",{class:"tw-whitespace-nowrap"},p(null==(s=null==t?void 0:t.spec)?void 0:s.title),1),a("div",{class:"tw-flex tw-truncate tw-items-center tw-ml-2 tw-px-2 tw-text-sm tw-text-indigo-400 tw-bg-indigo-500 tw-rounded-lg tw-text-center tw-bg-opacity-10"},[a("span",null,"xxxxxx.com/"+p(null==(l=null==t?void 0:t.spec)?void 0:l.slug),1)])]),a("div",{class:"tw-opacity-50 tw-text-base tw-mt-0.5 tw-truncate tw-cursor-pointer"},p(null==(r=null==t?void 0:t.spec)?void 0:r.description),1)])])],8,["onClick"])})),128)),a("div",{class:"tw-text-sm tw-text-center tw-mt-3 tw-opacity-30"}," 只展示最多10条搜索记录 ")])):d("",!0)])])])),_:1},512)])}]])}},[["render",function(t,e,s,l,r,h){var m,y;const k=g,j=f("SearchModal");return i(),o("div",{class:"tw-text-white tw-h-auto tw-w-full no-scrollbar"},[a("div",{class:"tw-px-3 tw-pt-3"},[a("div",{class:"tw-flex tw-flex-row tw-justify-between tw-items-center"},[a("div",{class:"tw-text-xl tw-font-bold"}," 数字身份 "),a("div",{onClick:e[0]||(e[0]=(...t)=>h.search&&h.search(...t))},[a("img",{class:"tw-w-4 tw-h-4",src:"https://static.xxxxxx.com/6836d15dccb8095efee8f68b1f605f8163b37236d33cdc699ae9738137f7f7bd",alt:""})])]),(null==(m=r.bannerInfo)?void 0:m.state)?(i(),o("div",{key:0,onClick:e[1]||(e[1]=(...t)=>h.jumpBannerPage&&h.jumpBannerPage(...t)),class:"tw-relative tw-mt-2"},[a("div",{class:"tw-w-full tw-h-24 tw-rounded-lg",style:v(h.getBannerStyle())},null,4),a("div",{class:"tw-absolute tw-bottom-1 tw-px-3 tw-text-base"},p(null==(y=r.bannerInfo)?void 0:y.title),1)])):d("",!0),h.hasProfiles?d("",!0):(i(),o("div",{key:1},[a("div",{class:"tw-text-center tw-text-white/60 tw-text-sm tw-py-8"},[a("img",{class:"tw-w-28 tw-h-28",src:"https://static.xxxxxx.com/e004bfac0ba7c2df24d955e01ff37beb5dcc5600b8ced38c5fe292a966f449f4",alt:""}),a("div",{class:"tw-text-sm tw-opacity-30"},"暂时没有数字身份")])])),h.hasProfiles?b((i(),o("div",{key:2,class:"tw-mt-2"},[(i(!0),o(c,null,u(h.profiles,(t=>{var e,s,l,r;return i(),o("div",{class:"tw-transition tw-duration-300 tw-mt-3 hover:tw-border-white tw-border-solid tw-border-2 tw-border-transparent tw-bg-white tw-rounded-2xl tw-bg-opacity-5 tw-py-4 tw-px-3 tw-rounded-lg",onClick:e=>h.jumpProfileEditPage(t),key:t},[a("div",{class:"tw-flex tw-items-center tw-flex-row tw-flex-shrink-0"},[a("div",{class:"tw-mr-2 tw-cursor-pointer tw-mr-2 tw-flex tw-justify-center tw-items-center tw-flex-shrink-0"},[a("img",{src:null==(e=null==t?void 0:t.spec)?void 0:e.avatar,class:"tw-w-14 tw-h-14 tw-rounded-full"},null,8,["src"])]),a("div",{style:{width:"calc(100% - 4rem)"}},[a("div",{class:"tw-text-lg tw-cursor-pointer tw-flex tw-flex-row"},[a("div",{class:"tw-whitespace-nowrap"},p(null==(s=null==t?void 0:t.spec)?void 0:s.title),1),a("div",{class:"tw-flex tw-truncate tw-items-center tw-ml-2 tw-px-2 tw-text-sm tw-text-indigo-400 tw-bg-indigo-500 tw-rounded-lg tw-text-center tw-bg-opacity-10"},[a("span",null,"xxxxxx.com/"+p(null==(l=null==t?void 0:t.spec)?void 0:l.slug),1)])]),a("div",{class:"tw-opacity-50 tw-text-base tw-mt-0.5 tw-truncate tw-cursor-pointer"},p(null==(r=null==t?void 0:t.spec)?void 0:r.description),1)])])],8,["onClick"])})),128))],512)),[[x,!r.loading]]):d("",!0),a("div",{class:"tw-mt-3"},[w(k,{onClick:h.createProfile,"hover-class":"none",class:"tw-rounded-xl tw-bg-white tw-bg-opacity-5 hover:tw-bg-opacity-10"},{default:n((()=>[a("div",{class:"tw-text-white tw-text-base tw-flex tw-items-center tw-justify-center tw-py-3.5"},[a("img",{class:"tw-w-5 tw-h-5 tw-mr-2",src:"https://static.xxxxxx.com/mdi/791f815eceab01a3ff62f1e59e8bc6183ed312bf36e84f952c26fb24a679ef9a"}),a("span",null,"创建新的数字身份")])])),_:1},8,["onClick"])])]),w(j,{ref:"SearchModal"},null,512)])}],["__scopeId","data-v-5db1a707"]]);export{P as default};
