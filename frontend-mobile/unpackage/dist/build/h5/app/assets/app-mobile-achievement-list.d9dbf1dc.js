import{_ as t,u as e,a as s,v as a,y as i,l as n,o as l,c,b as w,p as m,t as o,e as r,F as h,A as d,d as u,w as p,G as v,B as g,S as f}from"./index-737b53c3.js";import{I as x}from"./IconFont.01846b5a.js";import{S as b}from"./SBTImage.055099b9.js";const y=t({onShow(){this.loadBannerInfo(),this.page=1,this.achievementList=[],this.userAchievementList=[],this.campaignList=[],this.getUserAchievements(),this.getCampaignList(!0)},data:()=>({isLoading:!1,page:1,pageSize:10,userAchievementList:[],campaignList:[],achievementList:[],keywords:"",currentSBTProfile:{},bannerInfo:{}}),computed:{accountId:()=>e().$state.accountId},methods:{getBannerStyle(){var t;return`background: url(${null==(t=this.bannerInfo)?void 0:t.image}) center center no-repeat; background-size: cover;`},jumpAchievement(t){this.jumpAchievementDetail(t.achievement_id)},async loadBannerInfo(){const t=await s.GetAchievementMobileBannerInfo();console.log("getBannerInfo",t),this.bannerInfo=t},async getUserAchievements(){const t=await s.ListUserAchievements(this.accountId,this.page,this.pageSize);this.userAchievementList=t.achievement_list},async getCampaignList(t){a({title:"加载中",mask:!0});try{const e=await s.ListCampaign(null,this.page,this.pageSize);t?this.campaignList=e.campaign_list:this.campaignList.push(...e.campaign_list),console.log(this.campaignList,"this.campaignList")}finally{i()}},async getAchievementList(){a({title:"加载中",mask:!0});try{const t=await s.ListAchievement(this.page,this.pageSize,this.keywords);this.achievementList=t.achievement_list}finally{i()}},async loadMore(){if(this.isLoading)return;this.isLoading=!0,this.page++;const t=await s.ListCampaign(this.page,this.pageSize,this.keywords);this.campaignList=[...this.campaignList,...t.campaignList]},async onSearch(){this.page=1,await this.getAchievementList()},async onCancel(){this.page=1,this.keywords="",await this.getAchievementList()},async jumpIssuer(t){n({url:`/app/mobile/achievement/issuer?account_id=${t}`})},async jumpAchievementDetail(t){n({url:`/app/mobile/achievement/detail?achievementId=${t}`})},jumpBannerPage(){n({url:"/app/mobile/achievement/banner"})}},components:{IconFont:x,SBTImage:b}},[["render",function(t,e,s,a,i,n){var x,b;const y=v,L=f;return l(),c("div",{class:"tw-text-white tw-h-auto tw-w-full no-scrollbar",style:{background:"#121212"}},[w("div",{class:"tw-px-3 tw-pt-5"},[w("div",{class:"tw-flex tw-flex-row tw-justify-between tw-items-center"},[w("div",{class:"tw-text-xl tw-font-bold"}," 数字成就 ")]),(null==(x=i.bannerInfo)?void 0:x.state)?(l(),c("div",{key:0,onClick:e[0]||(e[0]=(...t)=>n.jumpBannerPage&&n.jumpBannerPage(...t)),class:"tw-relative tw-mt-2"},[w("div",{class:"tw-w-full tw-h-24 tw-rounded-lg",style:m(n.getBannerStyle())},null,4),w("div",{class:"tw-absolute tw-bottom-1 tw-px-3 tw-text-base"},o(null==(b=i.bannerInfo)?void 0:b.title),1)])):r("",!0),w("div",{class:"tw-mt-3"},[w("div",{class:"tw-flex tw-justify-between tw-items-end"},[w("div",{class:"tw-text-lg tw-flex tw-justify-between tw-w-full"},[w("span",null,"我的成就")])]),w("div",{class:"tw-mt-3"},[i.userAchievementList&&i.userAchievementList.length?r("",!0):(l(),c("div",{key:0,class:"tw-p-2 tw-mr-2"},[w("div",{class:"tw-text-center tw-text-white/60 tw-text-sm tw-pt-5 tw-pb-8"},[w("img",{class:"tw-w-28 tw-h-28",src:"https://static.xxxxxx.com/e004bfac0ba7c2df24d955e01ff37beb5dcc5600b8ced38c5fe292a966f449f4",alt:""}),w("div",{class:"tw-text-sm tw-opacity-30"},"暂时没有收集到任何成就")])])),i.userAchievementList&&i.userAchievementList.length?(l(),c("div",{key:1,class:"tw-flex tw-flex-row tw-overflow-x-auto tw-flex-shrink-0"},[(l(!0),c(h,null,d(i.userAchievementList,(t=>(l(),c("div",{class:"tw-mr-2",onClick:e=>n.jumpAchievement(t),key:t},[w("div",{class:"tw-w-32 tw-h-32 tw-flex-shrink-0 tw-mx-auto"},[w("img",{class:"tw-w-full tw-h-full tw-text-base",src:t.achievement_image,alt:t.achievement_name},null,8,["src","alt"])]),w("div",{class:"tw-w-32 tw-flex tw-items-center tw-mt-2 tw-text-base tw-truncate"},[w("span",{class:"tw-mr-1"},o(t.achievement_name),1),w("img",{class:"tw-w-4 tw-h-4",src:"https://static.xxxxxx.com/55d39abf637e94f70bd1ead24ee58f74139ec38980eda2e7c162ba16d2956262",alt:""})]),w("div",{class:"tw-w-32 tw-text-sm tw-opacity-60 tw-truncate"},o(t.achievement_summary),1)],8,["onClick"])))),128))])):r("",!0)])]),w("div",{class:"tw-mt-3"},[w("div",{class:"tw-flex tw-justify-between tw-items-end"},[w("div",{class:"tw-text-lg"},"近期活动")]),u(y,null,{default:p((()=>[u(L,{style:{background:"rgb(17, 17, 17)","tw-border-color":"rgb(43, 43, 43)",height:"300px"},"scroll-y":"true",onScrolltolower:n.loadMore},{default:p((()=>[w("div",{class:"tw-pt-3 tw-flex tw-flex-col tw-truncate"},[(l(!0),c(h,null,d(i.campaignList,(t=>(l(),g(y,{class:"tw-flex tw-flex-row tw-mb-5 tw-overflow-hidden",key:t,onClick:e=>n.jumpAchievementDetail(t.achievement_ids[0])},{default:p((()=>[w("div",{class:"tw-w-20 tw-h-20 tw-flex-shrink-0"},[w("img",{class:"tw-w-full tw-h-full",src:t.campaign_image,alt:t.achievement_name},null,8,["src","alt"])]),w("div",{class:"tw-flex tw-flex-col tw-ml-3 tw-justify-center tw-overflow-hidden"},[w("div",{class:"tw-flex tw-items-center tw-truncate tw-text-lg tw-leading-none"},[w("span",{class:"tw-mr-1"},o(t.campaign_name),1),w("img",{class:"tw-w-4 tw-h-4",src:"https://static.xxxxxx.com/55d39abf637e94f70bd1ead24ee58f74139ec38980eda2e7c162ba16d2956262",alt:""})]),w("div",{class:"tw-truncate tw-flex tw-items-center tw-text-sm tw-mt-1"},[w("img",{class:"tw-w-4 tw-h-4 tw-rounded-full",src:t.issuer_avatar,alt:""},null,8,["src"]),w("span",{class:"tw-ml-1 tw-text-white tw-text-opacity-60"},o(t.issuer_name),1)]),w("div",{class:"tw-truncate tw-text-sm tw-opacity-60 tw-mt-1"},[w("span",null,o(t.campaign_summary),1)])])])),_:2},1032,["onClick"])))),128))])])),_:1},8,["onScrolltolower"])])),_:1})])])])}],["__scopeId","data-v-43530e2d"]]);export{y as default};
